<!doctype html><html lang=en><head><title>Tech :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/categories/tech/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Tech"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/categories/tech/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/categories/tech/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><h1>Posts for: #Tech</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2022-09-10-kubernetes-labels/>Kubernetes, connection timeouts, and the importance of labels</a></h1><div class=post-meta><time class=post-date>2022-09-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cloud/>cloud</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/labels/>labels</a>&nbsp;
</span><img src=/post/2022-09-10-kubernetes-labels/cover.png class=post-cover alt="Kubernetes, connection timeouts, and the importance of labels" title="Cover Image"><div class=post-content><p>We are working with an application that produces resource utilization reports for clients of our OpenShift-based cloud environments. The developers working with the application have been reporting mysterious issues concerning connection timeouts between the application and the database (a MariaDB instance). For a long time we had only high-level verbal descriptions of the problem (&ldquo;I&rsquo;m seeing a lot of connection timeouts!&rdquo;) and a variety of unsubstantiated theories (from multiple sources) about the cause. Absent a solid reproducer of the behavior in question, we looked at other aspects of our infrastructure:</p></div><div><a class="read-more button inline" href=/post/2022-09-10-kubernetes-labels/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2022-06-20-traefik-multiple-listeners/>Directing different ports to different containers with Traefik</a></h1><div class=post-meta><time class=post-date>2022-06-20</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/containers/>containers</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/traefik/>traefik</a>&nbsp;
</span><img src=/post/2022-06-20-traefik-multiple-listeners/cover.jpg class=post-cover alt="Directing different ports to different containers with Traefik" title="Cover Image"><div class=post-content><p>This post is mostly for myself: I find the <a href=https://traefik.io>Traefik</a> documentation hard to navigate, so having figured this out in response to <a href=https://stackoverflow.com/a/72694677/147356>a question on Stack Overflow</a>, I&rsquo;m putting it here to help it stick in my head.</p><p>The question asks essentially how to perform port-based routing of requests to containers, so that a request for <code>http://example.com</code> goes to one container while a request for <code>http://example.com:9090</code> goes to a different container.</p><h2 id=creating-entrypoints>Creating entrypoints</h2><p>A default Traefik configuration will already have a listener on port 80, but if we want to accept connections on port 9090 we need to create a new listener: what Traefik calls an <a href=https://doc.traefik.io/traefik/routing/entrypoints/>entrypoint</a>. We do this using the <code>--entrypoints.&lt;name>.address</code> option. For example, <code>--entrypoints.ep1.address=80</code> creates an entrypoint named <code>ep1</code> on port 80, while <code>--entrypoints.ep2.address=9090</code> creates an entrypoint named <code>ep2</code> on port 9090. Those names are important because we&rsquo;ll use them for mapping containers to the appropriate listener later on.</p></div><div><a class="read-more button inline" href=/post/2022-06-20-traefik-multiple-listeners/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2022-02-13-wemos-udev-rules/>Udev rules for CH340 serial devices</a></h1><div class=post-meta><time class=post-date>2022-02-13</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/linux/>linux</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/micropython/>micropython</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/udev/>udev</a>&nbsp;
</span><img src=/post/2022-02-13-wemos-udev-rules/cover.png class=post-cover alt="Udev rules for CH340 serial devices" title="Cover Image"><div class=post-content><p>I like to fiddle with <a href=https://micropython.org>Micropython</a>, particularly on the <a href=https://www.wemos.cc/en/latest/d1/d1_mini.html>Wemos D1 Mini</a>, because these are such a neat form factor. Unfortunately, they have a cheap CH340 serial adapter on board, which means that from the perspective of Linux these devices are all functionally identical &ndash; there&rsquo;s no way to identify one device from another. This by itself would be a manageable problem, except that the device names assigned to these devices aren&rsquo;t constant: depending on the order in which they get plugged in (and the order in which they are detected at boot), a device might be <code>/dev/ttyUSB0</code> one day and <code>/dev/ttyUSB2</code> another day.</p></div><div><a class="read-more button inline" href=/post/2022-02-13-wemos-udev-rules/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-09-05-sx-question-filters/>A pair of userscripts for cleaning up Stack Exchange sites</a></h1><div class=post-meta><time class=post-date>2021-09-05</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/stackexchange/>stackexchange</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/browser/>browser</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/javascript/>javascript</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/userscripts/>userscripts</a>&nbsp;
</span><img src=/post/2021-09-05-sx-question-filters/cover.png class=post-cover alt="A pair of userscripts for cleaning up Stack Exchange sites" title="Cover Image"><div class=post-content><p>I&rsquo;ve been a regular visitor to <a href=https://stackoverflow.com>Stack Overflow</a> and other <a href=https://stackexchange.com>Stack
Exchange</a> sites over the years, and while I&rsquo;ve mostly enjoyed the
experience, I&rsquo;ve been frustrated by the lack of control I have over
what questions I see. I&rsquo;m not really interested in looking at
questions that have already been closed, or that have a negative
score, but there&rsquo;s no native facility for filtering questions like
this.</p><p>I finally spent the time learning just enough JavaScript ~~~to hurt
myself~~~ to put together a pair of scripts that let me present the
questions that way I want:</p></div><div><a class="read-more button inline" href=/post/2021-09-05-sx-question-filters/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-09-03-kubernetes-external-secrets/>Kubernetes External Secrets</a></h1><div class=post-meta><time class=post-date>2021-09-03</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/secrets/>secrets</a>&nbsp;
</span><img src=/post/2021-09-03-kubernetes-external-secrets/cover.jpg class=post-cover alt="Kubernetes External Secrets" title="Cover Image"><div class=post-content><p>At <em>$JOB</em> we maintain the configuration for our OpenShift clusters in a public git repository. Changes in the git repository are applied automatically using <a href=https://argo-cd.readthedocs.io/en/stable/>ArgoCD</a> and <a href=https://kustomize.io/>Kustomize</a>. This works great, but the public nature of the repository means we need to find a secure solution for managing secrets (such as passwords and other credentials necessary for authenticating to external services). In particular, we need a solution that permits our public repository to be the source of truth for our cluster configuration, without compromising our credentials.</p></div><div><a class="read-more button inline" href=/post/2021-09-03-kubernetes-external-secrets/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-08-23-external-ocs/>Connecting OpenShift to an External Ceph Cluster</a></h1><div class=post-meta><time class=post-date>2021-08-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/ceph/>ceph</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ocs/>ocs</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/odf/>odf</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/storage/>storage</a>&nbsp;</span><div class=post-content><p>Red Hat&rsquo;s <a href=https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation>OpenShift Data Foundation</a> (formerly &ldquo;OpenShift
Container Storage&rdquo;, or &ldquo;OCS&rdquo;) allows you to either (a) automatically
set up a Ceph cluster as an application running on your OpenShift
cluster, or (b) connect your OpenShift cluster to an externally
managed Ceph cluster. While setting up Ceph as an OpenShift
application is a relatively polished experienced, connecting to an
external cluster still has some rough edges.</p><p><strong>NB</strong> I am not a Ceph expert. If you read this and think I&rsquo;ve made a
mistake with respect to permissions or anything else, please feel free
to leave a comment and I will update the article as necessary. In
particular, I think it may be possible to further restrict the <code>mgr</code>
permissions shown in this article and I&rsquo;m interested in feedback on
that topic.</p></div><div><a class="read-more button inline" href=/post/2021-08-23-external-ocs/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-04-17-vm-ovs-vxlan/>Creating a VXLAN overlay network with Open vSwitch</a></h1><div class=post-meta><time class=post-date>2021-04-17</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/virtualization/>virtualization</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/vxlan/>vxlan</a>&nbsp;</span><div class=post-content><p>In this post, we&rsquo;ll walk through the process of getting virtual
machines on two different hosts to communicate over an overlay network
created using the support for VXLAN in <a href=https://www.openvswitch.org/>Open vSwitch</a> (or OVS).</p><h2 id=the-test-environment>The test environment</h2><p>For this post, I&rsquo;ll be working with two systems:</p><ul><li><code>node0.ovs.virt</code> at address 192.168.122.107</li><li><code>node1.ovs.virt</code> at address 192.168.122.174</li></ul><p>These hosts are running CentOS 8, although once we get past the
package installs the instructions will be similar for other
distributions.</p></div><div><a class="read-more button inline" href=/post/2021-04-17-vm-ovs-vxlan/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-03-09-getting-started-with-ksops/>Getting started with KSOPS</a></h1><div class=post-meta><time class=post-date>2021-03-09</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ksops/>ksops</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gpg/>gpg</a>&nbsp;</span><div class=post-content><p><a href=https://kustomize.io/>Kustomize</a> is a tool for assembling Kubernetes manifests from a
collection of files. We&rsquo;re making extensive use of Kustomize in the
<a href=https://www.operate-first.cloud/>operate-first</a> project. In order to keep secrets stored in our
configuration repositories, we&rsquo;re using the <a href=https://github.com/viaduct-ai/kustomize-sops>KSOPS</a> plugin, which
enables Kustomize to use <a href=https://github.com/mozilla/sops>sops</a> to encrypt/files using GPG.</p><p>In this post, I&rsquo;d like to walk through the steps necessary to get
everything up and running.</p><h2 id=set-up-gpg>Set up GPG</h2><p>We encrypt files using GPG, so the first step is making sure that you
have a GPG keypair and that your public key is published where other
people can find it.</p></div><div><a class="read-more button inline" href=/post/2021-03-09-getting-started-with-ksops/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-02-27-git-doc-tools/>Tools for writing about Git</a></h1><div class=post-meta><time class=post-date>2021-02-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/git/>git</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/graphviz/>graphviz</a>&nbsp;</span><div class=post-content><p>I sometimes find myself writing articles or documentation about
<a href=https://git-scm.org>git</a>, so I put together a couple of terrible hacks for generating
reproducible histories and pretty graphs of those histories.</p><h2 id=git-synth>git synth</h2><p>The <a href=https://github.com/larsks/git-snippets/blob/master/git-synth><code>git synth</code></a> command reads a <a href=https://yaml.org/>YAML</a> description of a
repository and executes the necessary commands to reproduce that
history. It allows you set the name and email address of the author
and committer as well as static date, so you every time you generate
the repository you can identical commit ids.</p></div><div><a class="read-more button inline" href=/post/2021-02-27-git-doc-tools/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-02-24-file-reorganization/>File reorganization</a></h1><div class=post-meta><time class=post-date>2021-02-24</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/administrivia/>administrivia</a>&nbsp;</span><div class=post-content><p>This is just a note that I&rsquo;ve substantially changed how the post
sources are organized. I&rsquo;ve tried to ensure that I preserve all the
existing links, but if you spot something missing please feel free to
leave a comment on this post.</p></div><div><a class="read-more button inline" href=/post/2021-02-24-file-reorganization/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/categories/tech/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/categories/tech/page/3/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>