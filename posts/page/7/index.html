<!doctype html><html lang=en><head><title>:: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/posts/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/posts/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/posts/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-2/>Debugging attiny85 code, part 2: Automating GDB with scripts</a></h2><div class=post-meta><time class=post-date>2019-01-22</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/attiny85/>attiny85</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/avr/>avr</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gdb/>gdb</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/simavr/>simavr</a>&nbsp;</span><div class=post-content><p>This is the second of three posts about using <code>gdb</code> and <code>simavr</code> to debug AVR code. The complete series is:</p><ul><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-1/>Part 1: Using GDB</a></p><p>A walkthrough of using GDB to manually inspect the behavior of our code.</p></li><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-2/>Part 2: Automating GDB with scripts</a></p><p>Creating GDB scripts to automatically test the behavior of our code.</p></li><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-3/>Part 3: Tracing with simavr</a></p><p>Using <code>simavr</code> to collect information about the state of microcontroller pins while our code is running.</p></div><div><a class="read-more button inline" href=/post/2019-01-22-debugging-attiny-code-pt-2/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-3/>Debugging attiny85 code, part 3: Tracing with simavr</a></h2><div class=post-meta><time class=post-date>2019-01-22</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/attiny85/>attiny85</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/avr/>avr</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gdb/>gdb</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/simavr/>simavr</a>&nbsp;</span><div class=post-content><figure><a href=pipower_trace.png><img src=/post/2019-01-22-debugging-attiny-code-pt-3/pipower_trace.png width=800></a></figure><p>This is the third of three posts about using <code>gdb</code> and <code>simavr</code> to debug AVR code. The complete series is:</p><ul><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-1/>Part 1: Using GDB</a></p><p>A walkthrough of using GDB to manually inspect the behavior of our code.</p></li><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-2/>Part 2: Automating GDB with scripts</a></p><p>Creating GDB scripts to automatically test the behavior of our code.</p></li><li><p><a href=https://blog.oddbit.com/post/2019-01-22-debugging-attiny-code-pt-3/>Part 3: Tracing with simavr</a></p><p>Using <code>simavr</code> to collect information about the state of microcontroller pins while our code is running.</p></div><div><a class="read-more button inline" href=/post/2019-01-22-debugging-attiny-code-pt-3/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2019-01-19-pipower-a-raspberry-pi-ups/>PiPower: A Raspberry Pi UPS</a></h2><div class=post-meta><time class=post-date>2019-01-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/raspberrypi/>raspberrypi</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/attiny85/>attiny85</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/arduino/>arduino</a>&nbsp;</span><div class=post-content><figure><a href=pipower-top.jpg><img src=/post/2019-01-19-pipower-a-raspberry-pi-ups/pipower-top.jpg width=400></a></figure><p>I have a Raspberry Pi running <a href=https://retropie.org.uk/>RetroPie</a> hooked up to a television. It&rsquo;s powered from a USB port on the TV, which is convenient, but it means that whenever we shut off the TV we&rsquo;re pulling the plug on the Pi. While there haven&rsquo;t been any problems so far, this is a classic recipe for filesystem problems or data loss at some point. I started looking into UPS options to alleviate this issue. I wanted something with the following features:</p></div><div><a class="read-more button inline" href=/post/2019-01-19-pipower-a-raspberry-pi-ups/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-10-19-integrating-bitwarden-with-ans/>Integrating Bitwarden with Ansible</a></h2><div class=post-meta><time class=post-date>2018-10-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/bitwarden/>bitwarden</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/security/>security</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ansible/>ansible</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/pull-request/>pull-request</a>&nbsp;</span><div class=post-content><p><a href=https://bitwarden.com>Bitwarden</a> is a password management service (like <a href=https://www.lastpass.com/>LastPass</a> or
<a href=https://1password.com/>1Password</a>). It&rsquo;s unique in that it is built entirely on open
source software. In addition to the the web UI and mobile apps that
you would expect, Bitwarden also provides a <a href=https://help.bitwarden.com/article/cli/>command-line tool</a> for
interacting with the your password store.</p><p>At $WORK(-ish) we&rsquo;re looking into Bitwarden because we want a password
sharing and management solution that was better than dropping files
into directories on remote hosts or sharing things over Slack. At
the same time, we are also thinking about bringing more automation to
our operational environment, possibly by making more extensive use of
<a href=https://ansible.com>Ansible</a>. It looked like all the pieces were available to use
Bitwarden as a credential storage mechanism for Ansible playbooks, so
I set out to write a lookup plugin to implement the integration&mldr;</p></div><div><a class="read-more button inline" href=/post/2018-10-19-integrating-bitwarden-with-ans/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-10-19-systemd-unit-for-managing-usb-/>Systemd unit for managing USB gadgets</a></h2><div class=post-meta><time class=post-date>2018-10-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/raspberrypi/>raspberrypi</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/usb/>usb</a>&nbsp;</span><div class=post-content><p>The Pi Zero (and Zero W) have support for acting as a USB <a href=http://www.linux-usb.org/gadget/>gadget</a>:
that means that they can be configured to act as a USB device &ndash; like
a serial port, an ethernet interface, a mass storage device, etc.</p><p>There are two different ways of configuring this support. The first
only allows you to configure a single type of gadget at a time, and
boils down to:</p><ol><li>Enable the dwc2 overlay in <code>/boot/config.txt</code></li><li>Reboot.</li><li><code>modprobe g_serial</code></li></ol><p>This process is more fully documented <a href=https://learn.adafruit.com/turning-your-raspberry-pi-zero-into-a-usb-gadget/overview>here</a>.</p></div><div><a class="read-more button inline" href=/post/2018-10-19-systemd-unit-for-managing-usb-/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-06-14-configuring-a-static-address-f/>Configuring a static address for wlan0 on Raspbian Stretch</a></h2><div class=post-meta><time class=post-date>2018-06-14</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/raspberrypi/>raspberrypi</a>&nbsp;</span><div class=post-content><p>Recent releases of Raspbian have adopted the use of <a href=http://manpages.ubuntu.com/manpages/trusty/man8/dhcpcd5.8.html>dhcpcd</a> to
manage both dynamic and static interface configuration. If you would
prefer to use the traditional <code>/etc/network/interfaces</code> mechanism
instead, follow these steps.</p><ol><li><p>First, disable <code>dhcpcd</code> and <code>wpa_supplicant</code>.</p><pre><code> systemctl disable --now dhdpcd wpa_supplicant
</code></pre></li><li><p>You will need a <code>wpa_supplicant</code> configuration for <code>wlan0</code> in
<code>/etc/wpa_supplicant/wpa_supplicant-wlan0.conf</code>.</p><p>If you already have an appropriate configuration in
<code>/etc/wpa_supplicant/wpa_supplicant.conf</code>, you can just symlink the
file:</p><pre><code>  cd /etc/wpa_supplicant
  ln -s wpa_supplicant.conf wpa_supplicant-wlan0.conf
</code></pre></li><li><p>Enable the <code>wpa_supplicant</code> service for <code>wlan0</code>:</p></div><div><a class="read-more button inline" href=/post/2018-06-14-configuring-a-static-address-f/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-05-03-using-a-tm-led-module-with-cir/>Using a TM1637 LED module with CircuitPython</a></h2><div class=post-meta><time class=post-date>2018-05-03</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/python/>python</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/esp8266/>esp8266</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/circuitpython/>circuitpython</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/micropython/>micropython</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/adafruit/>adafruit</a>&nbsp;</span><div class=post-content><p><a href=https://learn.adafruit.com/welcome-to-circuitpython/overview>CircuitPython</a> is &ldquo;an education friendly open source derivative of
<a href=https://micropython.org/>MicroPython</a>&rdquo;. MicroPython is a port of Python to microcontroller
environments; it can run on boards with very few resources such as the
<a href=https://en.wikipedia.org/wiki/ESP8266>ESP8266</a>. I&rsquo;ve recently started experimenting with CircuitPython
on a <a href=https://wiki.wemos.cc/products:d1:d1_mini>Wemos D1 mini</a>, which is a small form-factor ESP8266 board.</p><p>I had previously been using Mike Causer&rsquo;s <a href=https://github.com/mcauser/micropython-tm1637/>micropython-tm1637</a> for
MicroPython to drive a <a href=http://a.co/gQVPtPr>4 digit LED display</a>. I was hoping to
get the same code working under CircuitPython, but when I tried to
build an image that included the <code>tm1637</code> module I ran into:</p></div><div><a class="read-more button inline" href=/post/2018-05-03-using-a-tm-led-module-with-cir/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-03-27-multiple-1-wire-buses-on-the-/>Multiple 1-Wire Buses on the Raspberry Pi</a></h2><div class=post-meta><time class=post-date>2018-03-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/hardware/>hardware</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/raspberrypi/>raspberrypi</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/onewire/>onewire</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/iot/>iot</a>&nbsp;
</span><img src=/post/2018-03-27-multiple-1-wire-buses-on-the-/onewire.jpg class=post-cover alt="Multiple 1-Wire Buses on the Raspberry Pi" title="Cover Image"><div class=post-content><p>The DS18B20 is a popular temperature sensor that uses the <a href=https://en.wikipedia.org/wiki/1-Wire>1-Wire</a>
protocol for communication. Recent versions of the Linux kernel
include a kernel driver for this protocol, making it relatively
convenient to connect one or more of these devices to a Raspberry Pi
or similar device. 1-Wire devices can be daisy chained, so it is
possible to connect several devices to your Pi using only a single
GPIO pin, and you&rsquo;ll find many articles out there that describe how to
do so.</p></div><div><a class="read-more button inline" href=/post/2018-03-27-multiple-1-wire-buses-on-the-/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-03-12-using-docker-macvlan-networks/>Using Docker macvlan networks</a></h2><div class=post-meta><time class=post-date>2018-03-12</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;</span><div class=post-content><p>A question that crops up regularly on <a href=https://docs.docker.com/opensource/ways/#docker-users>#docker</a> is &ldquo;How do I attach
a container directly to my local network?&rdquo; One possible answer to that
question is the <a href=https://docs.docker.com/network/macvlan/>macvlan</a> network type, which lets you create
&ldquo;clones&rdquo; of a physical interface on your host and use that to attach
containers directly to your local network. For the most part it works
great, but it does come with some minor caveats and limitations. I
would like to explore those here.</p></div><div><a class="read-more button inline" href=/post/2018-03-12-using-docker-macvlan-networks/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2018-02-27-listening-for-connections-on-a/>Listening for connections on all ports/any port</a></h2><div class=post-meta><time class=post-date>2018-02-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>On <a href=https://en.wikipedia.org/wiki/Internet_Relay_Chat>IRC</a> &ndash; and other online communities &ndash; it is common to use a
&ldquo;pastebin&rdquo; service to share snippets of code, logs, and other
material, rather than pasting them directly into a conversation.
These services will typically return a URL that you can share with
others so that they can see the content in their browser.</p><p>One of my favorite pastebin services is <a href=http://termbin.com>termbin.com</a>, because it
works from the command line using tools you probably already have
installed. Termbin runs the <a href=https://github.com/solusipse/fiche>fiche</a> service, which listens for TCP
connections on port 9999, reads any content that you provide, and then
returns a URL. For example, if I wanted to share my <code>iptables</code>
configuration with someone I could just run:</p></div><div><a class="read-more button inline" href=/post/2018-02-27-listening-for-connections-on-a/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/posts/page/6/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/posts/page/8/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>