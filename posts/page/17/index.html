<!doctype html><html lang=en><head><title>:: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/posts/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/posts/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/posts/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-22-a-unified-cli-for-op/>A unified CLI for OpenStack</a></h2><div class=post-meta><time class=post-date>2013-11-22</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;</span><div class=post-content><p>The <a href=https://github.com/openstack/python-openstackclient>python-openstackclient</a> project, by <a href=https://github.com/dtroyer>Dean Troyer</a> and
others, is a new command line tool to replace the existing command
line clients (including commands such as <code>nova</code>, <code>keystone</code>, <code>cinder</code>,
etc).</p><p>This tool solves two problems I&rsquo;ve encountered in the past:</p><ul><li><p>Command line options between different command line clients are
sometimes inconsistent.</p></li><li><p>The output from the legacy command line tools is not designed to be
machine parse-able (and yet people <a href=https://github.com/openstack/python-openstackclient>do it anyway</a>).</p></li></ul><p>The new <code>openstack</code> CLI framework is implement using the <a href=https://github.com/dreamhost/cliff>cliff</a>
module for Python, which will help enforce a consistent interface to
the various subcommands (because common options can be shared, and
just having everything in the same codebase will help tremendously).
Cliff also provides flexible table formatters. It includes a number
of useful formatters out of the box, and can be extended via
setuptools entry points.</p></div><div><a class="read-more button inline" href=/post/2013-11-22-a-unified-cli-for-op/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-22-automatic-maintenanc/>Automatic maintenance of tag feeds</a></h2><div class=post-meta><time class=post-date>2013-11-22</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/blog/>blog</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/git/>git</a>&nbsp;</span><div class=post-content><p>I recently added some scripts to automatically generate tag feeds for
my blog when pushing new content. I&rsquo;m using GitHub Pages to publish
everything, so it seemed easiest to make tag generation part of a
<code>pre-push</code> hook (new in Git 1.8.2). This hook is run automatically as
part of the <code>git push</code> operation, so it&rsquo;s the perfect place to insert
generated content that must be kept in sync with posts on the blog.</p></div><div><a class="read-more button inline" href=/post/2013-11-22-automatic-maintenanc/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-18-enabled-comments/>Enabled blog comments</a></h2><div class=post-meta><time class=post-date>2013-11-18</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/blog/>blog</a>&nbsp;</span><div class=post-content><p>I&rsquo;ve enabled blog comments using <a href=http://disqus.com/>Disqus</a>. This is something of an
experiment, since (a) I&rsquo;m not really happy with how Disqus is handling
user registration these days and (b) I don&rsquo;t know that I have the time
to moderate anything. But we&rsquo;ll see.</p></div><div><a class="read-more button inline" href=/post/2013-11-18-enabled-comments/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-17-json-tools/>json-tools: cli for generating and filtering json</a></h2><div class=post-meta><time class=post-date>2013-11-17</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/json/>json</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;</span><div class=post-content><p>Interacting with JSON-based APIs from the command line can be
difficult, and OpenStack is filled with REST APIs that consume or
produce JSON. I&rsquo;ve just put pair of tools for generating and
filtering JSON on the command line, called collectively
<a href=http://github.com/larsks/json-tools/>json-tools</a>.</p><p>Both make use of the Python <a href=https://github.com/akesterson/dpath-python>dpath</a> module to populate or filter
JSON objects.</p><p>The <code>jsong</code> command generates JSON on <code>stdout</code>. You provide <code>/</code>-delimited paths
on the command line to represent the JSON structure. For example, if
you run:</p></div><div><a class="read-more button inline" href=/post/2013-11-17-json-tools/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-14-quantum-in-too-much-detail/>Quantum in Too Much Detail</a></h2><div class=post-meta><time class=post-date>2013-11-14</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/quantum/>quantum</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><blockquote><p>I originally posted this article on
the <a href=http://openstack.redhat.com/Networking_in_too_much_detail>RDO</a>
website.</p></blockquote><h1 id=the-players>The players</h1><p>This document describes the architecture that results from a
particular OpenStack configuration, specifically:</p><ul><li>Quantum networking using GRE tunnels;</li><li>A dedicated network controller;</li><li>A single instance running on a compute host</li></ul><p>Much of the document will be relevant to other configurations, but
details will vary based on your choice of layer 2 connectivity, number
of running instances, and so forth.</p></div><div><a class="read-more button inline" href=/post/2013-11-14-quantum-in-too-much-detail/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-13-moving-to-github/>Moving to GitHub</a></h2><div class=post-meta><time class=post-date>2013-11-13</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/blog/>blog</a>&nbsp;</span><div class=post-content><p>This blog has been hosted on <a href=http://scriptogr.am/>scriptogram</a> for the past year or so.
Unfortunately, while I like the publish-via-Dropbox mechanism, there
have been enough problems recently that I&rsquo;ve finally switched over to
using <a href=http://pages.github.com/>GitHub Pages</a> for hosting. I&rsquo;ve been thinking about doing
this for a while, but the things that finally pushed me to make the
change were:</p><ul><li>Sync problems that would prevent new posts from appearing (and that
at least once caused posts to disappear).</li><li>Lack of any response to bug reports by the site maintainers.</li></ul><p>A benefit of the publish-via-Dropbox mechanism is, of course, that I
already had all the data and didn&rsquo;t need to go through any sort of
export process.</p></div><div><a class="read-more button inline" href=/post/2013-11-13-moving-to-github/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-11-12-a-random-collection/>A random collection of OpenStack Tools</a></h2><div class=post-meta><time class=post-date>2013-11-12</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;</span><div class=post-content><p>I&rsquo;ve been working with <a href=http://openstack.org/>OpenStack</a> a lot recently, and I&rsquo;ve ended up with a small collection of utilities that make my life easier. On the odd chance that they&rsquo;ll make your life easier, too, I thought I&rsquo;d hilight them here.</p><h2 id=crux>Crux</h2><p><a href=http://github.com/larsks/crux>Crux</a> is a tool for provisioning tenants, users, and roles in keystone. Instead of a sequence of keystone command, you can provision new tenants, users, and roles with a single comand.</p></div><div><a class="read-more button inline" href=/post/2013-11-12-a-random-collection/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-10-28-why-does-the-neutron/>Why does the Neutron documentation recommend three interfaces?</a></h2><div class=post-meta><time class=post-date>2013-10-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>The <a href=http://docs.openstack.org/havana/install-guide/install/yum/content/neutron-install.dedicated-network-node.html>documentation for configuring Neutron</a> recommends
that a network controller has three physical interfaces:</p><blockquote><p>Before you start, set up a machine to be a dedicated network node.
Dedicated network nodes should have the following NICs: the
management NIC (called MGMT_INTERFACE), the data NIC (called
DATA_INTERFACE), and the external NIC (called EXTERNAL_INTERFACE).</p></blockquote><p>People occasionally ask, &ldquo;why three interfaces? What if I only have
two?&rdquo;, so I wanted to provide an extended answer that might help
people understand what the interfaces are for and what trade-offs are
involved in using fewer interfaces.</p></div><div><a class="read-more button inline" href=/post/2013-10-28-why-does-the-neutron/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-10-04-automatic-dns-entrie/>Automatic hostname entries for libvirt domains</a></h2><div class=post-meta><time class=post-date>2013-10-04</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/libvirt/>libvirt</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/virtualization/>virtualization</a>&nbsp;</span><div class=post-content><p>Have you ever wished that you could use <code>libvirt</code> domain names as
hostnames? So that you could do something like this:</p><pre><code>$ virt-install -n anewhost ...
$ ssh clouduser@anewhost
</code></pre><p>Since this is something that would certainly make my life convenient,
I put together a small script called <a href=https://raw.github.com/larsks/virt-utils/master/virt-hosts>virt-hosts</a> that makes this
possible. You can find <a href=https://raw.github.com/larsks/virt-utils/master/virt-hosts>virt-hosts</a> in my <a href=https://raw.github.com/larsks/virt-utils/>virt-utils</a> GitHub
repository:</p><ul><li><a href=https://raw.github.com/larsks/virt-utils/master/virt-hosts>https://raw.github.com/larsks/virt-utils/master/virt-hosts</a></li></ul><p>Run by itself, with no options, <code>virt-hosts</code> will scan through your
running domains for interfaces on the libvirt <code>default</code> network, look
up those MAC addresses up in the corresponding <code>default.leases</code> file,
and then generate a hosts file on <code>stdout</code> like this:</p></div><div><a class="read-more button inline" href=/post/2013-10-04-automatic-dns-entrie/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2013-08-05-interrupts-on-the-pi/>Interrupts on the PiFace</a></h2><div class=post-meta><time class=post-date>2013-08-05</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/raspberrypi/>raspberrypi</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/python/>python</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/piface/>piface</a>&nbsp;</span><div class=post-content><p>I recently acquired both a <a href=http://www.raspberrypi.org/>Raspberry Pi</a> and a <a href=http://www.element14.com/community/docs/DOC-52857/l/piface-digital-for-raspberry-pi>PiFace</a> IO board.
I had a rough time finding examples of how to read the input ports via
interrupts (rather than periodically polling for values), especially
for the <a href=https://github.com/piface>newer versions</a> of the PiFace python libraries.</p><p>After a little research, <a href=https://gist.github.com/larsks/6161684>here&rsquo;s</a> some simple code that
will print out pin names as you press the input buttons. Button 3
will cause the code to exit:</p><pre><code>#!/usr/bin/python

import pifacecommon.core
import pifacecommon.interrupts
import os
import time

quit = False

def print_flag(event):
    print 'You pressed button', event.pin_num, '.'

def stop_listening(event):
    global quit
    quit = True

pifacecommon.core.init()

# GPIOB is the input ports, including the four buttons.
port = pifacecommon.core.GPIOB

listener = pifacecommon.interrupts.PortEventListener(port)

# set up listeners for all buttons
listener.register(0, pifacecommon.interrupts.IODIR_ON, print_flag)
listener.register(1, pifacecommon.interrupts.IODIR_ON, print_flag)
listener.register(2, pifacecommon.interrupts.IODIR_ON, print_flag)
listener.register(3, pifacecommon.interrupts.IODIR_ON, stop_listening)

# Start listening for events.  This spawns a new thread.
listener.activate()

# Hang around until someone presses button 3.
while not quit:
    time.sleep(1)

print 'you pressed button 3 (quitting)'
listener.deactivate()
</code></pre></div><div><a class="read-more button inline" href=/post/2013-08-05-interrupts-on-the-pi/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/posts/page/16/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/posts/page/18/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>