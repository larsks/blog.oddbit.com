<!doctype html><html lang=en><head><title>:: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/posts/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/posts/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/posts/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2012-07-27-git-fetch-tags-et-al/>Git fetch, tags, remotes, and more</a></h2><div class=post-meta><time class=post-date>2012-07-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/git/>git</a>&nbsp;</span><div class=post-content><p>I’ve been playing around with Git, Puppet, and GPG verification of our
Puppet configuration repository, and these are some random facts about
Git that have come to light as part of the process.</p><p>If you want to pull both changes <em>and</em> new tags from a remote
repository, you can do this:</p><pre><code>$ git fetch
$ git fetch --tags
</code></pre><p>Or you can do this:</p><pre><code>$ git fetch --tags
$ git fetch
</code></pre><p>What’s the difference? <code>git fetch</code> will leave <code>FETCH_HEAD</code> pointing at
the remote <code>HEAD</code>, whereas <code>git fetch --tags</code> will leave <code>FETCH_HEAD</code>
pointing at the most recent tag.</p></div><div><a class="read-more button inline" href=/post/2012-07-27-git-fetch-tags-et-al/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2012-02-22-capturing-envoy-data/>Capturing Envoy Data</a></h2><div class=post-meta><time class=post-date>2012-02-22</time></div><div class=post-content><p>Pursuant to my <a href=http://blog.oddbit.com/2012/02/13/enphase-envoy-xml-data-format/>last post</a>, I&rsquo;ve written a simple man-in-the-middle proxy to intercept communication between the Envoy and the Enphase servers. The code is available <a href=https://github.com/larsks/envoy-tools>here</a>.</p><h2 id=what-it-does>What it does</h2><p>As I detailed in my previous post, the Envoy sends data to Enphase via http <code>POST</code> requests. The proxy intercepts these requests, extracts the XML data from the request, and writes it to a local file (by default in <code>/var/spool/envoy</code>). It then forwards the request on to Enphase, and returns the reply to your Envoy.</p></div><div><a class="read-more button inline" href=/post/2012-02-22-capturing-envoy-data/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2012-02-13-enphase-envoy-xml-data-format/>Enphase Envoy XML Data Format</a></h2><div class=post-meta><time class=post-date>2012-02-13</time></div><div class=post-content><p>We recently installed a (photovoltaic) solar array on our house. The system uses <a href=http://enphase.com/>Enphase</a> microinverters, and includes a monitoring device called the &ldquo;<a href=http://enphase.com/products/envoy/>Envoy</a>&rdquo;. The Envoy collects data from the microinverters and sends it back to Enphase. Enphase performs monitoring services for the array and also provides access to the data collected by the Envoy product.</p><p>I&rsquo;m interested in getting direct access to the data provided by the Envoy. In pursuit of that goal, I set up a man-in-the-middle proxy server on my home network to intercept the communication from the Envoy to the Enphase servers. I&rsquo;m documenting the results of my exploration here in case somebody else finds the information useful.</p></div><div><a class="read-more button inline" href=/post/2012-02-13-enphase-envoy-xml-data-format/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-12-26-simple-rate-limiting/>Rate limiting made simple</a></h2><div class=post-meta><time class=post-date>2011-12-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/linux/>linux</a>&nbsp;</span><div class=post-content><p>I use <a href=http://www.crashplan.com/>CrashPlan</a> as a backup service. It works and is very simple to set
up, but has limited options for controlling bandwidth. In fact, if you&rsquo;re
running it on a headless system (e.g., a fileserver of some sort), your options
are effectively &ldquo;too slow&rdquo; and &ldquo;CONSUME EVERYTHING&rdquo;. There is an <a href="https://crashplan.zendesk.com/entries/446273-throttle-bandwidth-by-hours?page=1#post_20799486">open
request</a> to add time-based limitations to the application itself, but for
now I&rsquo;ve solved this using a very simple traffic shaping configuration.
Because the learning curve for &ldquo;tc&rdquo; and friends is surprisingly high, I&rsquo;m
putting <a href=https://gist.github.com/larsks/4014881>my script</a> here in the hopes
that other people might find it useful, and so that I can find it when I need
to do this again someday.</p></div><div><a class="read-more button inline" href=/post/2011-12-26-simple-rate-limiting/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-08-16-puppet-scope-and-inheritance/>Puppet, scope, and inheritance</a></h2><div class=post-meta><time class=post-date>2011-08-16</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/puppet/>puppet</a>&nbsp;</span><div class=post-content><p>I note this here because it wasn&rsquo;t apparent to me from the Puppet documentation.</p><p>If you have a Puppet class like this:</p><pre><code>class foo {
  File {  ensure  =&gt; file,
          mode    =&gt; 600,
          }
}
</code></pre><p>And you use it like this:</p><pre><code>class bar {
  include foo

  file { '/tmp/myfile': }
}
</code></pre><p>Then /tmp/myfile will not be created. But if instead you do this:</p><pre><code>class bar inherits foo {
  file { '/tmp/myfile': }
}
</code></pre><p>It will be created with mode 0600. In other words, if you use inherits then definitions in the parent class are available in the scope of your subclass. If you include, then definitions in he included class are &ldquo;below&rdquo; the scope of the including class.</p></div><div><a class="read-more button inline" href=/post/2011-08-16-puppet-scope-and-inheritance/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-07-26-fixing-rpm-with-evil-magic/>Fixing RPM with evil magic</a></h2><div class=post-meta><time class=post-date>2011-07-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/rpm/>rpm</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/bad_ideas/>bad_ideas</a>&nbsp;</span><div class=post-content><h1 id=fixing-rpmsign-with-evil-magic>Fixing rpmsign with evil magic</h1><p>At my office we are developing a deployment mechanism for RPM packages. The
general workflow looks like this:</p><ul><li>You build a source rpm on your own machine.</li><li>You sign the rpm with your GPG key.</li><li>You submit the source RPM to our buildserver.</li><li>The buildserver validates your signature and then builds the package.</li><li>The buildserver signs the package using a master signing key.</li></ul><p>The last step in that sequence represents a problem, because the <code>rpmsign</code>
command will always, always prompt for a password and read the response from
<code>/dev/tty</code>. This means that (a) you can&rsquo;t easily provide the password on stdin,
and (b) you can&rsquo;t fix the problem using a passwordless key.</p></div><div><a class="read-more button inline" href=/post/2011-07-26-fixing-rpm-with-evil-magic/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-05-22-installing-crashplan-under-fre/>Installing CrashPlan under FreeBSD 8</a></h2><div class=post-meta><time class=post-date>2011-05-22</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/backup/>backup</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/storage/>storage</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/java/>java</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/freebsd/>freebsd</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/crashplan/>crashplan</a>&nbsp;</span><div class=post-content><p>This articles describes how I got <a href=http://crashplan.com/>CrashPlan</a> running on my FreeBSD 8(-STABLE) system. <a href=http://kim.scarborough.chicago.il.us/do/nerd/tips/crashplan>These instructions</a> by Kim Scarborough were my starting point, but as these were for FreeBSD 7 there were some additional steps necessary to get things working.</p><h1 id=install-java>Install Java</h1><p>I had originally thought that it might be possible to run the CrashPlan client &ldquo;natively&rdquo; under FreeBSD. CrashPlan is a Java application, so this seemed like a possible solution. Unfortunately, Java under FreeBSD 8 seems to be a lost cause. I finally gave up and just installed Java under Linux.</p></div><div><a class="read-more button inline" href=/post/2011-05-22-installing-crashplan-under-fre/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-05-09-signing-data-with-ssh-agent/>Signing data with ssh-agent</a></h2><div class=post-meta><time class=post-date>2011-05-09</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/ssl/>ssl</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ssh/>ssh</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openssl/>openssl</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ssh-agent/>ssh-agent</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openssh/>openssh</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/rsa/>rsa</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cryptography/>cryptography</a>&nbsp;</span><div class=post-content><p>This is follow-up to my previous post, <a href=http://blog.oddbit.com/2011/05/08/converting-openssh-public-keys/>Converting OpenSSH public keys</a>.</p><p>OpenSSH allows one to use an <em>agent</em> that acts as a proxy to your private key. When using an agent &ndash; particularly with agent forwarding enabled &ndash; this allows you to authenticate to a remote host without having to (a) repeatedly type in your password or (b) expose an unencrypted private key to remote systems.</p><p>If one is temtped to use SSH keys as authentication credentials outside of ssh, one would ideally be able to take advantage of the ssh agent for these same reasons.</p></div><div><a class="read-more button inline" href=/post/2011-05-09-signing-data-with-ssh-agent/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2011-05-08-converting-openssh-public-keys/>Converting OpenSSH public keys</a></h2><div class=post-meta><time class=post-date>2011-05-08</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openssl/>openssl</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openssh/>openssh</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/rsa/>rsa</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cryptography/>cryptography</a>&nbsp;</span><div class=post-content><blockquote><p>I&rsquo;ve posted a <a href=http://blog.oddbit.com/2011/05/09/signing-data-with-ssh-agent/>followup</a> to this article that discusses ssh-agent.</p></blockquote><p>For reasons best left to another post, I wanted to convert an SSH public key into a PKCS#1 PEM-encoded public key. That is, I wanted to go from this:</p><pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQD7EZn/BzP26AWk/Ts2ymjpTXuXRiEWIWn
HFTilOTcuJ/P1HfOwiy4RHC1rv59Yh/E6jbTx623+OGySJWh1IS3dAEaHhcGKnJaikrBn3c
cdoNVkAAuL/YD7FMG1Z0SjtcZS6MoO8Lb9pkq6R+Ok6JQjwCEsB+OaVwP9RnVA+HSYeyCVE
0KakLCbBJcD1U2aHP4+IH4OaXhZacpb9Ueja6NNfGrv558xTgfZ+fLdJ7cpg6wU8UZnVM1B
JiUW5KFasc+2IuZR0+g/oJXaYwvW2T6XsMgipetCEtQoMAJ4zmugzHSQuFRYHw/7S6PUI2U
03glFmULvEV+qIxsVFT1ng3pj lars@tiamat.house
</code></pre><p>To this:</p><pre><code>-----BEGIN RSA PUBLIC KEY-----
MIIBCgKCAQEA+xGZ/wcz9ugFpP07Nspo6U17l0YhFiFpxxU4pTk3Lifz9R3zsIsu
ERwta7+fWIfxOo208ett/jhskiVodSEt3QBGh4XBipyWopKwZ93HHaDVZAALi/2A
+xTBtWdEo7XGUujKDvC2/aZKukfjpOiUI8AhLAfjmlcD/UZ1QPh0mHsglRNCmpCw
mwSXA9VNmhz+PiB+Dml4WWnKW/VHo2ujTXxq7+efMU4H2fny3Se3KYOsFPFGZ1TN
QSYlFuShWrHPtiLmUdPoP6CV2mML1tk+l7DIIqXrQhLUKDACeM5roMx0kLhUWB8P
+0uj1CNlNN4JRZlC7xFfqiMbFRU9Z4N6YwIDAQAB
-----END RSA PUBLIC KEY-----
</code></pre><p>If you have a recent version of OpenSSH (where recent means 5.6 or later), you can just do this:</p></div><div><a class="read-more button inline" href=/post/2011-05-08-converting-openssh-public-keys/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2010-08-10-python-ctypes-module/>Python ctypes module</a></h2><div class=post-meta><time class=post-date>2010-08-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/python/>python</a>&nbsp;</span><div class=post-content><p>I just learned about the Python <code>ctypes</code> module, which is a Python module for interfacing with C code. Among other things, <code>ctypes</code> lets you call arbitrary functions in shared libraries. This is, from my perspective, some very cool magic. I thought I would provide a short example here, since it took me a little time to get everything working smoothly.</p><p>For this example, we&rsquo;ll write a wrapper for the standard <code>statvfs(2)</code> function:</p></div><div><a class="read-more button inline" href=/post/2010-08-10-python-ctypes-module/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/posts/page/20/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/posts/page/22/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>