<!doctype html><html lang=en><head><title>:: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/posts/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://blog.oddbit.com/styles.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://blog.oddbit.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/posts/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/posts/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-01-28-lxc-cant-remove-cgroup/>Cleaning up LXC cgroups</a></h1><div class=post-meta><time class=post-date>2013-01-28 ::</time></div><div class=post-content><p>I spent some time today looking at systemd (44) under Fedora (17). When stopping an LXC container using lxc-stop, I would always encounter this problem:</p><h1 id=lxc-stop--n-node0-lxc-start-device-or-resource-busy---failed-to-remove-cgroup-sysfscgroupsystemdnode0-this-prevents-one-from-starting-a-new-container-with-the-same-name>lxc-stop -n node0 lxc-start: Device or resource busy - failed to remove cgroup &lsquo;/sys/fs/cgroup/systemd/node0 This prevents one from starting a new container with the same name:</h1><h1 id=lxc-start--n-node0-lxc-start-device-or-resource-busy---failed-to-remove-previous-cgroup-sysfscgroupsystemdnode0-lxc-start-failed-to-spawn-node0-lxc-start-device-or-resource-busy---failed-to-remove-cgroup-sysfscgroupsystemdnode0-you-can-correct-the-problem-manually-by-removing-all-the-child-cgroups-underneath-sysfscgroupsystemdltcontainergt-like-this>lxc-start -n node0 lxc-start: Device or resource busy - failed to remove previous cgroup &lsquo;/sys/fs/cgroup/systemd/node0&rsquo; lxc-start: failed to spawn &rsquo;node0&rsquo; lxc-start: Device or resource busy - failed to remove cgroup &lsquo;/sys/fs/cgroup/systemd/node0&rsquo; You can correct the problem manually by removing all the child cgroups underneath /sys/fs/cgroup/systemd/&lt;container>, like this:</h1></div><div><a class="read-more button" href=/post/2013-01-28-lxc-cant-remove-cgroup/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-01-28-how-do-i-lxc-console/>How do I LXC console?</a></h1><div class=post-meta><time class=post-date>2013-01-28 ::</time></div><div class=post-content><p>It took me an unreasonably long time to boot an LXC container with working console access. For the record:
When you boot an LXC container, the console appears to be attached to a pts device. For example, when booting with the console attached to your current terminal:</p><h1 id=lxc-start--n-node0--node0-login-root-last-login-mon-jan-28-163519-on-tty1-rootnode0--tty-devconsole-rootnode0--ls--l-devconsole-crw--------1-root-tty-136-12-jan-28-1636-devconsole-this-is-also-true-when-you-attach-to-a-container-using-lxc-console>lxc-start -n node0 &mldr; node0 login: root Last login: Mon Jan 28 16:35:19 on tty1 [root@node0 ~]# tty /dev/console [root@node0 ~]# ls -l /dev/console crw&mdash;&mdash;- 1 root tty 136, 12 Jan 28 16:36 /dev/console This is also true when you attach to a container using lxc-console:</h1></div><div><a class="read-more button" href=/post/2013-01-28-how-do-i-lxc-console/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-01-28-net-with-no-net/>Systemd and the case of the missing network</a></h1><div class=post-meta><time class=post-date>2013-01-28 ::</time></div><div class=post-content>I was intrigued by this post on socket activated containers with systemd. The basic premise is:
systemd opens a socket on the host and listens for connections. When a client connections, systemd spawns a new container. The host systemd passes the connected socket to the container systemd. Services in the container receive these sockets from the container systemd. This is a very neat idea, since it delegates all the socket listening to the host and only spins up container and service resources when necessary.</div><div><a class="read-more button" href=/post/2013-01-28-net-with-no-net/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-01-25-archlinux-second-look/>A second look at Arch Linux</a></h1><div class=post-meta><time class=post-date>2013-01-25 ::</time></div><div class=post-content>This is a followup to an earlier post about Arch Linux.
I’ve since spent a little more time working with Arch, and these are the things I like:
The base system is very small and has a very short boot time. I replaced Ubuntu on my old Eee PC with Arch and suddenly the boot time is reasonable (&lt; 10 seconds to a text prompt, &lt; 30 seconds to a full GUI login).</div><div><a class="read-more button" href=/post/2013-01-25-archlinux-second-look/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2012-12-21-parsing-libvirt-xml/>Parsing Libvirt XML with xmllint</a></h1><div class=post-meta><time class=post-date>2012-12-21 ::</time></div><div class=post-content>I’ve been playing around with the LXC support in libvirt recently, and I’m trying to use a model where each LXC instance is backed by a dedicated LVM volume. This means that the process of starting an instance is:
mount the instance root filesystem if necessary start the instance It’s annoying to have to do this by hand. I could simply add all the LXC filesystems to /etc/fstab, but this would mean and extra step when creating and deleting each instance.</div><div><a class="read-more button" href=/post/2012-12-21-parsing-libvirt-xml/>read more →</a></div></article><div class=pagination><div class=pagination__buttons><a href=/posts/page/35/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>Newer posts</span></a>
<a href=/posts/page/37/ class="button next"><span class=button__text>Older posts</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script>
<script src=/js/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>