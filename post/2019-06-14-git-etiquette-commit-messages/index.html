<!doctype html><html lang=en><head><title>Git Etiquette: Commit messages and pull requests :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Always work on a branch (never commit on master) When working with an upstream codebase, always make your changes on a feature branch rather than your local master branch. This will make it easier to keep your local master branch current with respect to upstream, and can help avoid situations in which you accidentally overwrite your local changes or introduce unnecessary merge commits into your history.
Rebase instead of merge If you need to incorporate changes from the upstream master branch in the feature branch on which you are currently doing, bring in those changes using git rebase rather than git merge. This process will generally start by ensuring that your local copy of the upstream master is current:
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/post/2019-06-14-git-etiquette-commit-messages/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Git Etiquette: Commit messages and pull requests"><meta property="og:description" content="Always work on a branch (never commit on master) When working with an upstream codebase, always make your changes on a feature branch rather than your local master branch. This will make it easier to keep your local master branch current with respect to upstream, and can help avoid situations in which you accidentally overwrite your local changes or introduce unnecessary merge commits into your history.
Rebase instead of merge If you need to incorporate changes from the upstream master branch in the feature branch on which you are currently doing, bring in those changes using git rebase rather than git merge. This process will generally start by ensuring that your local copy of the upstream master is current:
"><meta property="og:url" content="https://blog.oddbit.com/post/2019-06-14-git-etiquette-commit-messages/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="tech"><meta property="article:published_time" content="2019-06-14 00:00:00 +0000 UTC"></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-06-14-git-etiquette-commit-messages/>Git Etiquette: Commit messages and pull requests</a></h1><div class=post-meta><time class=post-date>2019-06-14&nbsp;[Updated: 2023-02-16]</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/git/>git</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/github/>github</a>&nbsp;</span><div class=post-content><div><h2 id=always-work-on-a-branch-never-commit-on-master>Always work on a branch (never commit on master)<a href=#always-work-on-a-branch-never-commit-on-master class=hanchor arialabel=Anchor>#</a></h2><p>When working with an upstream codebase, always make your changes on a feature branch rather than your local <code>master</code> branch. This will make it easier to keep your local <code>master</code> branch current with respect to upstream, and can help avoid situations in which you accidentally overwrite your local changes or introduce unnecessary merge commits into your history.</p><h2 id=rebase-instead-of-merge>Rebase instead of merge<a href=#rebase-instead-of-merge class=hanchor arialabel=Anchor>#</a></h2><p>If you need to incorporate changes from the upstream <code>master</code> branch in the feature branch on which you are currently doing, bring in those changes using <code>git rebase</code> rather than <code>git merge</code>. This process will generally start by ensuring that your local copy of the upstream <code>master</code> is current:</p><pre tabindex=0><code>git remote update
</code></pre><p>Followed by rebasing your changes on top of that branch:</p><pre tabindex=0><code>git rebase origin/master
</code></pre><h2 id=make-your-commit-messages-meaningful>Make your commit messages meaningful<a href=#make-your-commit-messages-meaningful class=hanchor arialabel=Anchor>#</a></h2><p>Your commit messages should follow common best practices, such as <a href=https://wiki.openstack.org/wiki/GitCommitMessages>those documented for OpenStack</a>. In general, this means:</p><ul><li><p>Your commit message should have the subject on the first line, then a blank line, then the message body.</p></li><li><p>The message body should be wrapped at around 75 characters.</p></li><li><p>Your commit message should succinctly describe <em>what</em> was changed and <em>why</em> it was changed.</p></li><li><p>If your commit is associated with a bug, user story, task, or other tracking mechanism, include a reference to the appropriate item in your commit message.</p></li></ul><h3 id=example-of-bad-commit-messages>Example of bad commit messages<a href=#example-of-bad-commit-messages class=hanchor arialabel=Anchor>#</a></h3><ol><li><p>This should probably have been squashed with the commit that introduced the typo:</p><pre tabindex=0><code>Fixed a typo.
</code></pre></li><li><p>This doesn&rsquo;t provide sufficient details:</p><pre tabindex=0><code>Trying that thing again
</code></pre></li><li><p>Changes necessary to resolve merge conflicts should generally be squashed into the commits that introduce the conflict:</p><pre tabindex=0><code>Fixing merge conflicts
</code></pre></li></ol><h3 id=example-of-good-commit-messages>Example of good commit messages<a href=#example-of-good-commit-messages class=hanchor arialabel=Anchor>#</a></h3><ol><li><p>A constructed example:</p><pre tabindex=0><code>Support new &#34;description&#34; field on all widgets (TG-100)

Update both the database model and the web UI to support an extended
&#34;description&#34; field on all objects. This allows us to generate more useful
product listings.
</code></pre></li><li><p>from <a href=https://github.com/openstack/ironic/commit/6ca99d67302d7e1b639ad9b745631e65a4b2f25c>https://github.com/openstack/ironic/commit/6ca99d67302d7e1b639ad9b745631e65a4b2f25c</a>:</p><pre tabindex=0><code>Add release note updating status of smartnics

Smartnic support merged into Neutron a few weeks ago,
and as we downplayed the functionality during the Stein
cycle, we should highlight it during Train since it should
now be available.

Change-Id: I19372a0ede703f62940bbb2cc3a80618560ebc93
</code></pre></li><li><p>from <a href=https://github.com/ansible/ansible/commit/88a1fc28d894575d48edc3817cc1a8ef4dca3cae>https://github.com/ansible/ansible/commit/88a1fc28d894575d48edc3817cc1a8ef4dca3cae</a>:</p><pre tabindex=0><code>Clean up iosxr get_config_diff function (#57589)

This fixes an index error issue when running tests on zuul.ansible.com
for iosxr. We can fix this by getting the last element in the list.
</code></pre></li></ol><h2 id=fix-typos-by-amending-or-rebasing>Fix typos by amending or rebasing<a href=#fix-typos-by-amending-or-rebasing class=hanchor arialabel=Anchor>#</a></h2><p>If before your pull request has merged you realize you need to fix a typo or other error, do not create a new commit with the correction.</p><p>If the typo is in the most recent commit, simply fix it, <code>git add</code> the change, and then use <code>git commit --amend</code> to update the latest commit.</p><p>If the typo is <strong>not</strong> in the latest commit, then use <code>git rebase</code> to edit the commit. The procedure will look something like this:</p><ol><li><p>Assuming that your branch is based on <code>origin/master</code>, run <code>git rebase -i origin/master</code>. This will bring up the &ldquo;pick list&rdquo;, which allows you to select among various actions for each commit between <code>origin/master</code> and your current branch. For example:</p><pre tabindex=0><code>pick 6ca99d673 Add release note updating status of smartnics
pick c2ab34a8c Do not log an exception if Allocation is deleted during handling.
pick 87464fbbc Change constraints opendev.org to release.openstack.org
pick 43f7bf9f0 Fix :param: in docstring
</code></pre></li><li><p>Change <code>pick</code> to <code>edit</code> for the commit you wish to edit, then exit your editor.</p></li><li><p>Make the necessary change, then <code>git add</code> your modified files and then <code>git rebase --continue</code>.</p></li></ol><p>In either of the above situations, when you have committed the changes locally, run <code>git push -f</code> to update the remote branch on GitHub (which will in turn update your pull request).</p><h2 id=have-one-commit-per-logical-change-and-one-major-feature-per-pull-request>Have one commit per logical change and one major feature per pull request<a href=#have-one-commit-per-logical-change-and-one-major-feature-per-pull-request class=hanchor arialabel=Anchor>#</a></h2><p>When you submit a pull request, all the commits associated with that pull request should be related to the same major feature. For example, if you made the follow changes:</p><ul><li>Fixed bug #1234</li><li>Wrote new feature discussed at last planning session</li></ul><p>Those should be two separate pull requests. On the other hand, if you have instead made these changes:</p><ul><li>Wrote new feature discussed at last planning session</li><li>Wrote documentation for new feature</li><li>Wrote tests for new feature</li></ul><p>Those could all be made part of the same pull request.</p><p>Within your pull request, there should be a single commit for each logical change. For example rather than:</p><ul><li>Started documentation for new feature</li><li>Made changes to documentation based on review</li><li>Reformatted documentation to fix syntax error</li></ul><p>You should have a single commit:</p><ul><li>Write documentation for new feature</li></ul><p>You should use <code>git commit --amend</code> or <code>git rebase</code>, as discussed earlier, to keep your commits topical and organized.</p></div></div><script src=https://utteranc.es/client.js repo=larsks/blog.oddbit.com issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>