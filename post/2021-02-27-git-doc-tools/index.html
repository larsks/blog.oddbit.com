<!doctype html><html lang=en><head><title>Tools for writing about Git :: blog.oddbit.com</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I sometimes find myself writing articles or documentation about git, so I put together a couple of terrible hacks for generating reproducible histories and pretty graphs of those histories.
git synth The git synth command reads a YAML description of a repository and executes the necessary commands to reproduce that history. It allows you set the name and email address of the author and committer as well as static date, so you every time you generate the repository you can identical commit ids.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/post/2021-02-27-git-doc-tools/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/styles.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://blog.oddbit.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Tools for writing about Git"><meta property="og:description" content="I sometimes find myself writing articles or documentation about git, so I put together a couple of terrible hacks for generating reproducible histories and pretty graphs of those histories.
git synth The git synth command reads a YAML description of a repository and executes the necessary commands to reproduce that history. It allows you set the name and email address of the author and committer as well as static date, so you every time you generate the repository you can identical commit ids.
"><meta property="og:url" content="https://blog.oddbit.com/post/2021-02-27-git-doc-tools/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="tech"><meta property="article:published_time" content="2021-02-27 00:00:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-02-27-git-doc-tools/>Tools for writing about Git</a></h1><div class=post-meta><time class=post-date>2021-02-27 ::
[Updated :: 2023-02-16]</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/git/>git</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/graphviz/>graphviz</a>&nbsp;</span><div class=post-content><div><p>I sometimes find myself writing articles or documentation about
<a href=https://git-scm.org>git</a>, so I put together a couple of terrible hacks for generating
reproducible histories and pretty graphs of those histories.</p><h2 id=git-synth>git synth<a href=#git-synth class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The <a href=https://github.com/larsks/git-snippets/blob/master/git-synth><code>git synth</code></a> command reads a <a href=https://yaml.org/>YAML</a> description of a
repository and executes the necessary commands to reproduce that
history. It allows you set the name and email address of the author
and committer as well as static date, so you every time you generate
the repository you can identical commit ids.</p><h2 id=git-dot>git dot<a href=#git-dot class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The <a href=https://github.com/larsks/git-snippets/blob/master/git-dot><code>git dot</code></a> command generates a representation of a repository
history in the <a href=https://en.wikipedia.org/wiki/DOT_(graph_description_language)>dot</a> language, and uses <a href=https://graphviz.org/>Graphviz</a> to render those
into diagrams.</p><h2 id=putting-it-together>Putting it together<a href=#putting-it-together class=hanchor arialabel=Anchor>&#8983;</a></h2><p>For example, the following history specification:</p><pre tabindex=0><code>- set:
    date: &#34;2021-01-01&#34;
    name: Fake Person
    email: fake@example.com
- branch:
    name: master
    actions:
      - commit:
          message: A
      - commit:
          message: B
      - commit:
          message: C
      - branch:
          name: topic1
          actions:
            - commit:
                message: D
            - commit:
                message: E
            - branch:
                name: topic2
                actions:
                  - commit:
                      message: F
                  - commit:
                      message: G
      - commit:
          message: H
</code></pre><p>When applied with <code>git synth</code>:</p><pre tabindex=0><code>$ git synth -r examplerepo examplerepo.yml
</code></pre><p>Will generate the following repository:</p><pre tabindex=0><code>$ git -C examplerepo log --graph --all --decorate --oneline
* 28f7b38 (HEAD -&gt; master) H
| * 93e1d18 (topic2) G
| * 3ef811d F
| * 973437c (topic1) E
| * 2c0bd1c D
|/  
* cabdedf C
* a5cbd99 B
* d98f949 A
</code></pre><p>We can run this <code>git dot</code> command line:</p><pre tabindex=0><code>$ git -C examplerepo dot -m -g branch --rankdir=RL
</code></pre><p>To produce the following <code>dot</code> description of the history:</p><pre tabindex=0><code>digraph git {
	graph [rankdir=RL]
	node [shape=circle]
	{
		node [group=master_commits]
		&#34;28f7b382a5&#34; [label=H tooltip=&#34;28f7b382a52ac53f86314e5d608ebafd66de6c44&#34;]
		cabdedff95 [label=C tooltip=cabdedff957f7dec15f365e7c29eaead9930d618]
		a5cbd99954 [label=B tooltip=a5cbd999545aeabc2e102a845aeb0466f01454a2]
		d98f949840 [label=A tooltip=d98f94984057d760066ba0b300ab4930497bcba6]
	}
	{
		node [group=topic1_commits]
		&#34;973437cb00&#34; [label=E tooltip=&#34;973437cb007d2a69d6564fd7b30f3e8c347073c2&#34;]
		&#34;2c0bd1c1df&#34; [label=D tooltip=&#34;2c0bd1c1dfe9f76cd18b37bb0bc995e449e0094b&#34;]
	}
	{
		node [group=topic2_commits]
		&#34;93e1d18862&#34; [label=G tooltip=&#34;93e1d18862102e044a4ec46bb189f5bca9ba0e05&#34;]
		&#34;3ef811d426&#34; [label=F tooltip=&#34;3ef811d426c09be792a0ff6564eca82a7bd105a9&#34;]
	}
	{
		node [color=black fontcolor=white group=heads shape=box style=filled]
		master
		topic1
		topic2
	}
	{
		edge [style=dashed]
		topic2 -&gt; &#34;93e1d18862&#34;
		topic1 -&gt; &#34;973437cb00&#34;
		master -&gt; &#34;28f7b382a5&#34;
	}
	a5cbd99954 -&gt; d98f949840
	&#34;3ef811d426&#34; -&gt; &#34;973437cb00&#34;
	&#34;973437cb00&#34; -&gt; &#34;2c0bd1c1df&#34;
	cabdedff95 -&gt; a5cbd99954
	&#34;28f7b382a5&#34; -&gt; cabdedff95
	&#34;2c0bd1c1df&#34; -&gt; cabdedff95
	&#34;93e1d18862&#34; -&gt; &#34;3ef811d426&#34;
}
</code></pre><p>Running that through the <code>dot</code> utility (<code>dot -Tsvg -o repo.svg repo.dot</code>) results in the following diagram:</p><figure class=left><img src=gen-094ef3d69a7692db2cdee8e04869e8f98bdd237b.svg></figure><h2 id=where-are-these-wonders>Where are these wonders?<a href=#where-are-these-wonders class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Both tools live in my <a href=https://github.com/larsks/git-snippets>git-snippets</a> repository, which is a motley
collection of shells scripts, python programs, and other utilities for
interacting with <code>git</code>.</p><p>It&rsquo;s all undocumented and uninstallable, but if there&rsquo;s interest in
either of these tools I can probably find the time to polish them up a
bit.</p></div></div><script src=https://utteranc.es/client.js repo=larsks/blog.oddbit.com issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>