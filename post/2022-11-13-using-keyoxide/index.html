<!doctype html><html lang=en><head><title>Using KeyOxide :: blog.oddbit.com</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In today&rsquo;s post, we look at KeyOxide, a service that allows you to cryptographically assert ownership of online resources using your GPG key. Some aspects of the service are less than obvious; in response to some questions I saw on Mastodon I though I would put together a short guide to making use of the service.
We&rsquo;re going to look at the following high-level tasks:
Create a GPG key
Publish the GPG key
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/post/2022-11-13-using-keyoxide/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/styles.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://blog.oddbit.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Using KeyOxide"><meta property="og:description" content="In today&rsquo;s post, we look at KeyOxide, a service that allows you to cryptographically assert ownership of online resources using your GPG key. Some aspects of the service are less than obvious; in response to some questions I saw on Mastodon I though I would put together a short guide to making use of the service.
We&rsquo;re going to look at the following high-level tasks:
Create a GPG key
Publish the GPG key
"><meta property="og:url" content="https://blog.oddbit.com/post/2022-11-13-using-keyoxide/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="tech"><meta property="article:published_time" content="2022-11-13 00:00:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://blog.oddbit.com/post/2022-11-13-using-keyoxide/>Using KeyOxide</a></h1><div class=post-meta><time class=post-date>2022-11-13 ::
[Updated :: 2023-02-16]</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/mastodon/>mastodon</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gpg/>gpg</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/pgp/>pgp</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/keyoxide/>keyoxide</a>&nbsp;
</span><img src=/post/2022-11-13-using-keyoxide/cover.jpg class=post-cover alt="Using KeyOxide" title="Cover Image"><div class=post-content><div><p>In today&rsquo;s post, we look at <a href=https://keyoxide.org/>KeyOxide</a>, a service that allows you to cryptographically assert ownership of online resources using your GPG key. Some aspects of the service are less than obvious; in response to some questions I saw on Mastodon I though I would put together a short guide to making use of the service.</p><p>We&rsquo;re going to look at the following high-level tasks:</p><ol><li><p><a href=/post/2022-11-13-using-keyoxide/#step-1-create-a-gpg-keypair>Create a GPG key</a></p></li><li><p><a href=/post/2022-11-13-using-keyoxide/#step-2-publish-your-key>Publish the GPG key</a></p></li><li><p><a href=/post/2022-11-13-using-keyoxide/#step-3-add-a-claim>Use the GPG key to assert claims on online resources</a></p></li></ol><h2 id=step-1-create-a-gpg-keypair>Step 1: Create a GPG keypair<a href=#step-1-create-a-gpg-keypair class=hanchor arialabel=Anchor>&#8983;</a></h2><p>If you already have a keypair, skip on to &ldquo;<a href=/post/2022-11-13-using-keyoxide/#step-2-publish-your-key>Step 2: Publish your key</a>&rdquo;.</p><p>The first thing you need to do is set up a GPG<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> keypair and publish it to a keyserver (or a <a href=https://wiki.gnupg.org/WKD>WKD endpoint</a>). There are many guides out there that step you through the process (for example, GitHub&rsquo;s guide on <a href=https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key>Generating a new GPG key</a>), but if you&rsquo;re in a hurry and not particularly picky, read on.</p><p>This assumes that you&rsquo;re using a recent version of GPG; at the time of this writing, the current GPG release is 2.3.8, but these instructions seem to work at least with version 2.2.27.</p><ol><li><p>Generate a new keypair using the <code>--quick-gen-key</code> option:</p><pre tabindex=0><code>gpg --batch --quick-gen-key &lt;your email address&gt;
</code></pre><p>This will use the GPG defaults for the key algorithm (varies by version) and expiration time (the key never expires<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>).</p></li><li><p>When prompted, enter a secure passphrase.</p></li><li><p>GPG will create a keypair for you; you can view it after the fact by running:</p><pre tabindex=0><code>gpg -qk &lt;your email address&gt;
</code></pre><p>You should see something like:</p><pre tabindex=0><code>pub   ed25519 2022-11-13 [SC] [expires: 2024-11-12]
      EC03DFAC71DB3205EC19BAB1404E03D044EE706B
uid           [ultimate] testuser@example.com
sub   cv25519 2022-11-13 [E]
</code></pre><p>In the above output, <code>F79CE5D41D93C2C0E97F9A63C4178440F81E4261</code> is the <em>key fingerprint</em>. We&rsquo;re going to need this later.</p></li></ol><p>Now you have created a GPG keypair!</p><h2 id=step-2-publish-your-key>Step 2: Publish your key<a href=#step-2-publish-your-key class=hanchor arialabel=Anchor>&#8983;</a></h2><p>If you&rsquo;ve already published your key at <a href=https://keys.openpgp.org/>https://keys.openpgp.org/</a> or at a <a href=https://wiki.gnupg.org/WKD>WKD</a> endpoint, skip on to &ldquo;<a href=/post/2022-11-13-using-keyoxide/#step-3-add-a-claim>Step 3: Add a claim</a>&rdquo;.</p><p>In order for KeyOxide to find your GPG key, it needs to be published at a known location. There are two choices:</p><ul><li>Publishing your key at the public keyserver at <a href=https://keys.openpgp.org/>https://keys.openpgp.org/</a>.</li><li>Publishing your key using a <a href=https://wiki.gnupg.org/WKD>WKD</a> service</li></ul><p>In this post, we&rsquo;re only going to consider the first option.</p><ol><li><p>Export your public key to a file using gpg&rsquo;s <code>--export</code> option:</p><pre tabindex=0><code>gpg --export -a &lt;your email address&gt; &gt; mykey.asc
</code></pre><p>This will create a file <code>mykey.asc</code> in your current directory that looks like:</p><pre tabindex=0><code>-----BEGIN PGP PUBLIC KEY BLOCK-----

[...a bunch of base64 encoded text...]
-----END PGP PUBLIC KEY BLOCK-----
</code></pre></li><li><p>Go to <a href=https://keys.openpgp.org/upload>https://keys.openpgp.org/upload</a>.</p></li><li><p>Select the key export you just created, and select &ldquo;upload&rdquo;.</p></li><li><p>When prompted on the next page, select &ldquo;Send Verification Email&rdquo;. Your key won&rsquo;t discoverable until you have received and responded to the verification email.</p></li><li><p>When you receive the email, select the verification link.</p></li></ol><p>Now your key has been published! You can verify this by going to <a href=https://keys.openpgp.org/>https://keys.openpgp.org/</a> and searching for your email address.</p><h2 id=step-3-add-a-claim>Step 3: Add a claim<a href=#step-3-add-a-claim class=hanchor arialabel=Anchor>&#8983;</a></h2><p>You assert ownership of an online resource through a three step process:</p><ol><li><p>Mark the online resource with your GPG key fingerprint. How you do this depends on the type of resource you&rsquo;re claiming; e.g., for GitHub you create a gist with specific content, while for claiming a DNS domain you create a <code>TXT</code> record.</p></li><li><p>Add a notation to your GPG key with a reference to the claim created in the previous step.</p></li><li><p>Update your published key.</p></li></ol><p>In this post we&rsquo;re going to look at two specific examples; for other services, see the &ldquo;Service providers&rdquo; section of the <a href=https://docs.keyoxide.org/>KeyOxide documentation</a>.</p><p>In order to follow any of the following instructions, you&rsquo;re going to need to know your <em>key fingerprint</em>. When you show your public key by running <code>gpg -k</code>, you key fingerprint is the long hexadecimal string on the line following the line that starts with <code>pub </code>:</p><pre tabindex=0><code>$ gpg -qk testuser@example.com
pub   ed25519 2022-11-13 [SC] [expires: 2024-11-12]
      EC03DFAC71DB3205EC19BAB1404E03D044EE706B      &lt;--- THIS LINE HERE
uid           [ultimate] testuser@example.com
sub   cv25519 2022-11-13 [E]
</code></pre><h3 id=add-a-claim-to-your-gpg-key>Add a claim to your GPG key<a href=#add-a-claim-to-your-gpg-key class=hanchor arialabel=Anchor>&#8983;</a></h3><p>This is a set of common instructions that we&rsquo;ll use every time we need to add a claim to our GPG key.</p><ol><li><p>Edit your GPG key using the <code>--edit-key</code> option:</p><pre tabindex=0><code>gpg --edit-key &lt;your email address&gt;
</code></pre><p>This will drop you into the GPG interactive key editor.</p></li><li><p>Select a user id on which to operate using the <code>uid</code> command. If you created your key following the instructions earlier in this post, then you only have a single user id:</p><pre tabindex=0><code>gpg&gt; uid 1
</code></pre></li><li><p>Add an annotation to the key using the <code>notation</code> command:</p><pre tabindex=0><code>gpg&gt; notation
</code></pre></li><li><p>When prompted, enter the notation (the format of the notation depends on the service you&rsquo;re claiming; see below for details). For example, if we&rsquo;re asserting a Mastodon identity at hachyderm.io, we would enter:</p><pre tabindex=0><code>Enter the notation: proof@ariadne.id=https://hachyderm.io/@testuser
</code></pre></li><li><p>Save your changes with the <code>save</code> command:</p><pre tabindex=0><code>gpg&gt; save
</code></pre></li></ol><h3 id=update-your-published-key>Update your published key<a href=#update-your-published-key class=hanchor arialabel=Anchor>&#8983;</a></h3><p>After adding an annotation to your key locally, you need to publish those changes. One way of doing this is simply following the <a href=/post/2022-11-13-using-keyoxide/#step-2-publish-your-key>instructions for initially uploading your public key</a>:</p><ol><li><p>Export the key to a file:</p><pre tabindex=0><code>gpg --export -a &lt;your email address&gt; &gt; mykey.asc
</code></pre></li><li><p>Upload your key to <a href=https://keys.openpgp.org/upload>https://keys.openpgp.org/upload</a>.</p></li></ol><p>You won&rsquo;t have to re-verify your key.</p><p>Alternately, you can configure gpg so that you can publish your key from the command line. Create or edit <code>$HOME/.gnupg/gpg.conf</code> and add the following line:</p><pre tabindex=0><code>keyserver hkps://keys.openpgp.org
</code></pre><p>Now every time you need to update the published version of your key:</p><ol><li><p>Upload your public key using the <code>--send-keys</code> option along with your key fingerprint, e.g:</p><pre tabindex=0><code>gpg --send-keys EC03DFAC71DB3205EC19BAB1404E03D044EE706B
</code></pre></li></ol><h3 id=claiming-a-mastodon-identity>Claiming a Mastodon identity<a href=#claiming-a-mastodon-identity class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li><p>On your favorite Mastodon server, go to your profile and select &ldquo;Edit profile&rdquo;.</p></li><li><p>Look for the &ldquo;Profile metadata section&rdquo;; this allows you to associate four bits of metadata with your Mastodon profile. Assuming that you still have a slot free, give it a name (it could be anything, I went with &ldquo;Keyoxide claim&rdquo;), and for the value enter:</p><pre tabindex=0><code>openpgp4fpr:&lt;your key fingerprint&gt;
</code></pre><p>E.g., given the <code>gpg -k</code> output shown above, I would enter:</p><pre tabindex=0><code>openpgp4fpr:EC03DFAC71DB3205EC19BAB1404E03D044EE706B
</code></pre></li><li><p>Click &ldquo;Save Changes&rdquo;</p></li></ol><p>Now, <a href=/post/2022-11-13-using-keyoxide/#add-a-claim-to-your-gpg-key>add the claim to your GPG key</a> by adding the notation <code>proof@ariadne.id=https://&lt;your mastodon server>/@&lt;your mastodon username</code>. I am @larsks@hachyderm.io, so I would enter:</p><pre tabindex=0><code>proof@ariadne.id=https://hachyderm.io/@larsks
</code></pre><p>After adding the claim, <a href=/post/2022-11-13-using-keyoxide/#update-your-published-key>update your published key</a>.</p><h3 id=claiming-a-github-identity>Claiming a Github identity<a href=#claiming-a-github-identity class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li><p>Create a <a href=https://gist.github.com>new gist</a> (it can be either secret or public).</p></li><li><p>In your gist, name the filename <code>openpgp.md</code>.</p></li><li><p>Set the content of that file to:</p><pre tabindex=0><code>openpgp4fpr:&lt;your key fingerprint&gt;
</code></pre></li></ol><p>Now, <a href=/post/2022-11-13-using-keyoxide/#add-a-claim-to-your-gpg-key>add the claim to your GPG key</a> by adding the notation <code>proof@ariadne.id=https://gist.github.com/larsks/&lt;gist id></code>. You can see my claim at <a href=https://gist.github.com/larsks/9224f58cf82bdf95ef591a6703eb91c7>https://gist.github.com/larsks/9224f58cf82bdf95ef591a6703eb91c7</a>; the notation I added to my key is:</p><pre tabindex=0><code>proof@ariadne.id=https://gist.github.com/larsks/9224f58cf82bdf95ef591a6703eb91c7
</code></pre><p>After adding the claim, <a href=/post/2022-11-13-using-keyoxide/#update-your-published-key>update your published key</a>.</p><h2 id=step-4-view-your-claims>Step 4: View your claims<a href=#step-4-view-your-claims class=hanchor arialabel=Anchor>&#8983;</a></h2><p>You&rsquo;ll note that none of the previous steps required interacting with <a href=https://keyoxide.org/>KeyOxide</a>. That&rsquo;s because KeyOxide doesn&rsquo;t actually store any of your data: it just provides a mechanism for visualizing and verifying claims.</p><p>You can look up an identity by email address or by GPG key fingerprint.</p><p>To look up an identity using an email address:</p><ol><li>Go to <code>https://keyoxide.org/&lt;email address</code>. For example, to find my identity, visit <a href=https://keyoxide.org/lars@oddbit.com>https://keyoxide.org/lars@oddbit.com</a>.</li></ol><p>To look up an identity by key fingerprint:</p><ol><li>Go to <code>https://keyoxide.org/&lt;fingerprint></code>. For example, to find my identity, visit <a href=https://keyoxide.org/3e70a502bb5255b6bb8e86be362d63a80853d4cf>https://keyoxide.org/3e70a502bb5255b6bb8e86be362d63a80853d4cf</a>.</li></ol><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>The pedantic among you will already be writing to me about how PGP is the standard and GPG is an implementation of that standard, but I&rsquo;m going to stick with this nomenclature for the sake of simplicity.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>For some thoughts on key expiration, see <a href=https://security.stackexchange.com/questions/14718/does-openpgp-key-expiration-add-to-security>this question</a> on the Information Security StackExchange.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></div><script src=https://utteranc.es/client.js repo=larsks/blog.oddbit.com issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>