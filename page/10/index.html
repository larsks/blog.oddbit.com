<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.110.0"><title>blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/><link rel=stylesheet href=https://blog.oddbit.com/styles.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://blog.oddbit.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="blog.oddbit.com"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class="index-content framed"><img src="https://s.gravatar.com/avatar/1c09a8d9e719f9d13b6c99f6bb2637d8?s=80" alt="Uncle Deadly Image" class=center style=border-radius:8px><p>Hi there. Welcome to <a href=https://blog.oddbit.com><code>blog.oddbit.com</code></a>! I post articles here on a variety of technical topics. Mostly I&rsquo;m posting for myself (writing things up helps me remember them in the future), but I always hope the content I put here is helpful to someone else. If you find something here useful and want to say thanks, feel free to <a href=https://www.buymeacoffee.com/oddbit>buy me a coffee</a>!</p></div><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-04-25-writing-ansible-filter-plugins/>Writing Ansible filter plugins</a></h1><div class=post-meta><time class=post-date>2019-04-25 ::</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/ansible/>ansible</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/python/>python</a>&nbsp;</span><div class=post-content>I often see questions from people who are attemping to perform complex text transformations in their Ansible playbooks. While I am a huge fan of Ansible, data transformation is not one of its strong points. For example, this past week someone asked a question on Stack Overflow in which they were attempting to convert the output of the keytool command into a list of dictionaries. The output of the keytool -list -v command looks something like this:</div><div><a class="read-more button" href=/post/2019-04-25-writing-ansible-filter-plugins/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-02-24-docker-build-learns-about-secr/>Docker build learns about secrets and ssh agent forwarding</a></h1><div class=post-meta><time class=post-date>2019-02-24 ::</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/secrets/>secrets</a>&nbsp;</span><div class=post-content>A common problem for folks working with Docker is accessing resources which require authentication during the image build step. A particularly common use case is getting access to private git repositories using ssh key-based authentication. Until recently there hasn’t been a great solution:
you can embed secrets in your image, but now you can’t share the image with anybody. you can use build arguments, but this requires passing in an unenecrypted private key on the docker build command line, which is suboptimal for a number of reasons you can perform all the steps requiring authentication at runtime, but this can needlessly complicate your container startup process.</div><div><a class="read-more button" href=/post/2019-02-24-docker-build-learns-about-secr/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-02-11-in-which-i-pebkac-so-you-dont-/>In which I PEBKAC so you don&rsquo;t have to</a></h1><div class=post-meta><time class=post-date>2019-02-11 ::</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/avr/>avr</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gcc/>gcc</a>&nbsp;</span><div class=post-content>Say you have a simple bit of code:
#include &lt;avr/io.h> #include &lt;util/delay.h> #define LED_BUILTIN _BV(PORTB5) int main(void) { DDRB |= LED_BUILTIN; while (1) { PORTB |= LED_BUILTIN; // turn on led _delay_ms(1000); // delay 1s PORTB &= ~LED_BUILTIN; // turn off led _delay_ms(1000); // delay 1s } } You have a Makefile that compiles that into an object (.o) file like this:
avr-gcc -mmcu=atmega328p -DF_CPU=16000000 -Os -c blink.c If you were to forget to set the device type when compiling your .</div><div><a class="read-more button" href=/post/2019-02-11-in-which-i-pebkac-so-you-dont-/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-02-01-atomicblock-magic-in-avrlibc/>ATOMIC_BLOCK magic in avr-libc</a></h1><div class=post-meta><time class=post-date>2019-02-01 ::</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/avr/>avr</a>&nbsp;</span><div class=post-content>The AVR C library, avr-libc, provide an ATOMIC_BLOCK macro that you can use to wrap critical sections of your code to ensure that interrupts are disabled while the code executes. At high level, the ATOMIC_BLOCK macro (when called using ATOMIC_FORCEON) does something like this:
cli(); &mldr;your code here&mldr; seti(); But it’s more than that. If you read the documentation for the macro, it says:
Creates a block of code that is guaranteed to be executed atomically.</div><div><a class="read-more button" href=/post/2019-02-01-atomicblock-magic-in-avrlibc/>read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2019-01-28-avr-gcc-short-enums/>AVR micro-optimization: Avr-gcc and &ndash;short-enums</a></h1><div class=post-meta><time class=post-date>2019-01-28 ::</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/avr/>avr</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/attiny85/>attiny85</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/avr-gcc/>avr-gcc</a>&nbsp;</span><div class=post-content>How big is an enum? I noticed something odd while browsing through the assembly output of some AVR C code I wrote recently. In the code, I have the following expression:
int main() { setup(); while (state != STATE_QUIT) { loop(); } } Here, state is a variable of type enum STATE, which looks something like this (not exactly like this; there are actually 19 possible values but I didn’t want to clutter this post with unnecessary code listings):</div><div><a class="read-more button" href=/post/2019-01-28-avr-gcc-short-enums/>read more →</a></div></article><div class=pagination><div class=pagination__buttons><a href=/page/9/ class="button previous"><span class=button__icon>←</span>
<span class=button__text>Newer posts</span></a>
<a href=/page/11/ class="button next"><span class=button__text>Older posts</span>
<span class=button__icon>→</span></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>