<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.151.0"><title>blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="blog.oddbit.com"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><div class="index-content framed"><img src="https://s.gravatar.com/avatar/1c09a8d9e719f9d13b6c99f6bb2637d8?s=80" alt="Uncle Deadly Image" class=center style=border-radius:8px><p>Hi there. Welcome to <a href=https://blog.oddbit.com><code>blog.oddbit.com</code></a>! I post articles here on a variety of technical topics. Mostly I&rsquo;m posting for myself (writing things up helps me remember them in the future), but I always hope the content I put here is helpful to someone else. If you find something here useful and want to say thanks, feel free to <a href=https://www.buymeacoffee.com/oddbit>buy me a coffee</a>!</p></div><div class=posts><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-booting-an-instance-with-multi/>Booting an instance with multiple fixed addresses</a></h2><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>This article expands on my answer to <a href=https://ask.openstack.org/en/question/30690/add-multiple-specific-ips-to-instance/>Add multiple specific IPs to
instance</a>, a question posted to <a href=https://ask.openstack.org/>ask.openstack.org</a>.</p><p>In order to serve out SSL services from an OpenStack instance, you
will generally want one local ip address for each SSL virtual host you
support. It is possible to create an instance with multiple fixed
addresses, but there are a few complications to watch out for.</p><h1 id=assumptions>Assumptions</h1><p>This article assumes that the following resources exist:</p></div><div><a class="read-more button inline" href=/post/2014-05-28-booting-an-instance-with-multi/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>Multiple external networks with a single L3 agent</a></h2><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In the old days (so, like, last year), Neutron supported a single
external network per L3 agent. You would run something like this&mldr;</p><pre><code>$ neutron net-create external --router:external=true
</code></pre><p>&mldr;and neutron would map this to the bridge defined in
<code>external_network_bridge</code> in <code>/etc/neutron/l3_agent.ini</code>. If you
wanted to support more than a single external network, you would need
to run multiple L3 agents, each with a unique value for
<code>external_network_bridge</code>.</p><p>There is now a better option available.</p></div><div><a class="read-more button inline" href=/post/2014-05-28-multiple-external-networks-wit/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-27-configuring-openstacks-externa/>Video: Configuring OpenStack&rsquo;s external bridge on a single-interface system</a></h2><div class=post-meta><time class=post-date>2014-05-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;</span><div class=post-content><p>I&rsquo;ve just put a video on Youtube that looks at the steps required to
set up the external bridge (<code>br-ex</code>) on a single-interface system:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/8zFQG5mKwPk?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></div><div><a class="read-more button inline" href=/post/2014-05-27-configuring-openstacks-externa/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-23-open-vswitch-and-persistent-ma/>Open vSwitch and persistent MAC addresses</a></h2><div class=post-meta><time class=post-date>2014-05-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;</span><div class=post-content><p>Normally I like to post solutions, but today&rsquo;s post is about a
vexing problem to which I have not been able to find a solution.</p><p>This started as a simple attempt to set up external connectivity on
an all-in-one Icehouse install deployed on an OpenStack instance. I
wanted to add <code>eth0</code> to <code>br-ex</code> in order to model a typical method for
providing external connectivity, but I ran into a very odd problem:
the system would boot and work fine for a few seconds, but would then
promptly lose network connectivity.</p></div><div><a class="read-more button inline" href=/post/2014-05-23-open-vswitch-and-persistent-ma/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-23-solved-open-vswitch-and-persis/>Solved: Open vSwitch and persistent MAC addresses</a></h2><div class=post-meta><time class=post-date>2014-05-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In my <a href=/2014/05/23/open-vswitch-and-persistent-ma/>previous post</a> I discussed a problem I was having setting a
persistent MAC address on an OVS bridge device. It looks like the
short answer is, &ldquo;don&rsquo;t use <code>ip link set ...</code>&rdquo; for this purpose.</p><p>You can set the bridge MAC address via <code>ovs-vsctl</code> like this:</p><pre><code>ovs-vsctl set bridge br-ex other-config:hwaddr=$MACADDR
</code></pre><p>So I&rsquo;ve updated my <code>ifconfig-br-ex</code> to look like this:</p><pre><code>DEVICE=br-ex
DEVICETYPE=ovs
TYPE=OVSBridge
ONBOOT=yes
OVSBOOTPROTO=dhcp
OVSDHCPINTERFACES=eth0
MACADDR=fa:16:3e:ef:91:ec
OVS_EXTRA=&quot;set bridge br-ex other-config:hwaddr=$MACADDR&quot;
</code></pre><p>The <code>OVS_EXTRA</code> parameter gets passed to the <code>add-br</code> call like this:</p></div><div><a class="read-more button inline" href=/post/2014-05-23-solved-open-vswitch-and-persis/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-21-sharing-a-terminal-session-wit/>Sharing a terminal session with termshare</a></h2><div class=post-meta><time class=post-date>2014-05-21</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/tools/>tools</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/terminal/>terminal</a>&nbsp;</span><div class=post-content><p><a href=https://github.com/progrium/termshare>Termshare</a> is a tool for sharing your terminal in a browser
session. It supports both read-only and read-write sessions, and
unlike many other tools it does not require any software installation
on the remote side. This makes it tremendously handy for:</p><ul><li>Streaming terminal demonstrations to a diverse audience, or</li><li>Sharing a terminal session with someone without needing to much
about with ssh, tmux, screen, etc.</li></ul><p>I&rsquo;ve successfully used <a href=https://github.com/progrium/termshare>Termshare</a> under both Fedora (19 and 20) and
CentOS. To get started on these platforms, you&rsquo;ll need to install the
<a href=http://golang.org/>Go</a> language, <a href=http://git-scm.org/>git</a> for cloning the termshare repository, and
<a href=http://mercurial.selenic.com/>mercurial</a> to support installation of some Go libraries:</p></div><div><a class="read-more button inline" href=/post/2014-05-21-sharing-a-terminal-session-wit/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-20-fedora-and-ovs-bridge-interfac/>Fedora and OVS Bridge Interfaces</a></h2><div class=post-meta><time class=post-date>2014-05-20</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/fedora/>fedora</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>I run OpenStack on my laptop, and I&rsquo;ve been chasing down a pernicious
problem with OVS bridge interfaces under both F19 and F20. My
OpenStack environment relies on an OVS bridge device named <code>br-ex</code> for
external connectivity and for making services available to OpenStack
instances, but after rebooting, <code>br-ex</code> was consistently unconfigured,
which caused a variety of problems.</p><p>This is the network configuration file for <code>br-ex</code> on my system:</p><pre><code>DEVICE=br-ex
DEVICETYPE=ovs
TYPE=OVSBridge
BOOTPROT=static
IPADDR=192.168.200.1
NETMASK=255.255.255.0
ONBOOT=yes
NM_CONTROLLED=no
ZONE=openstack
</code></pre><p>Running <code>ifup br-ex</code> would also fail to configure the interface, but
running <code>ifdown br-ex; ifup br-ex</code> would configure things
appropriately.</p></div><div><a class="read-more button inline" href=/post/2014-05-20-fedora-and-ovs-bridge-interfac/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-20-firewalld-and-openstack/>Firewalld, NetworkManager, and OpenStack</a></h2><div class=post-meta><time class=post-date>2014-05-20</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/firewalld/>firewalld</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networkmanager/>NetworkManager</a>&nbsp;</span><div class=post-content><p>These are my notes on making OpenStack play well with <a href=https://fedoraproject.org/wiki/FirewallD>firewalld</a>
and <a href=https://wiki.gnome.org/Projects/NetworkManager>NetworkManager</a>.</p><h2 id=networkmanager>NetworkManager</h2><p>By default, NetworkManager attempts to start a DHCP client on every
new available interface. Since booting a single instance in OpenStack
can result in the creation of several virtual interfaces, this results
in a lot of:</p><pre><code>May 19 11:58:24 pk115wp-lkellogg NetworkManager[1357]: &lt;info&gt;
  Activation (qvb512640bd-ee) starting connection 'Wired connection 2'
</code></pre><p>You can disable this behavior by adding the following to
<code>/etc/NetworkManager/NetworkManager.conf</code>:</p></div><div><a class="read-more button inline" href=/post/2014-05-20-firewalld-and-openstack/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-05-19-flat-networks-with-ml-and-open/>Flat networks with ML2 and OpenVSwitch</a></h2><div class=post-meta><time class=post-date>2014-05-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;</span><div class=post-content><p>Due to an unfortunate incident involving sleep mode and an overheated
backpack I had the &ldquo;opportunity&rdquo; to rebuild my laptop. Since this meant
reinstalling OpenStack I used this as an excuse to finally move to the ML2
network plugin for Neutron.</p><p>I was attempting to add an external network using the normal incantation:</p><pre><code>neutron net-create external -- --router:external=true \
    --provider:network_type=flat \
    --provider:physical_network=physnet1
</code></pre><p>While this command completed successfully, I was left without any
connectivity between <code>br-int</code> and <code>br-ex</code>, despite having in my
<code>/etc/neutron/plugins/ml2/ml2_conf.ini</code>:</p></div><div><a class="read-more button inline" href=/post/2014-05-19-flat-networks-with-ml-and-open/>[read more]</a></div></article><article class="post on-list"><h2 class=post-title><a href=https://blog.oddbit.com/post/2014-04-16-article-on-extending-puppet/>Extending Puppet</a></h2><div class=post-meta><time class=post-date>2014-04-16</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/puppet/>puppet</a>&nbsp;</span><div class=post-content><p>I wanted to learn about writing custom Puppet types and providers.
The official documentation is a little sparse, but I finally stumbled
upon the following series of articles by <a href=http://garylarizza.com/>Gary Larizza</a> that provide
a great deal of insight into the process and a bunch of example code:</p><ul><li><a href=http://garylarizza.com/blog/2013/11/25/fun-with-providers/>Fun With Puppet Providers</a></li><li><a href=http://garylarizza.com/blog/2013/11/26/fun-with-providers-part-2/>Who Abstracted My Ruby?</a></li><li><a href=http://garylarizza.com/blog/2013/12/15/seriously-what-is-this-provider-doing/>Seriously, What Is This Provider Doing?</a></li></ul></div><div><a class="read-more button inline" href=/post/2014-04-16-article-on-extending-puppet/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/page/14/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/page/16/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>