<!doctype html><html lang=en><head><title>Networking :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/tags/networking/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Networking"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/tags/networking/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/tags/networking/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><h1>Posts for: #Networking</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-08-13-provider-external-networks-det/>Provider external networks (in an appropriate amount of detail)</a></h1><div class=post-meta><time class=post-date>2015-08-13</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In <a href=https://blog.oddbit.com/post/2013-11-14-quantum-in-too-much-detail/>Quantum in Too Much Detail</a>, I discussed the architecture of a
Neutron deployment in detail. Since that article was published,
Neutron gained the ability to handle multiple external networks with a
single L3 agent. While I <a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>wrote about that</a> back in 2014, I
covered the configuration side of it in much more detail than I
discussed the underlying network architecture. This post addresses
the architecture side.</p><h2 id=the-players>The players</h2><p>This document describes the architecture that results from a
particular OpenStack configuration, specifically:</p></div><div><a class="read-more button inline" href=/post/2015-08-13-provider-external-networks-det/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-10-06-docker-networking-with-dedicat/>Docker networking with dedicated network containers</a></h1><div class=post-meta><time class=post-date>2014-10-06</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=post-content><p>The current version of Docker has a very limited set of networking
options:</p><ul><li><code>bridge</code> &ndash; connect a container to the Docker bridge</li><li><code>host</code> &ndash; run the container in the global network namespace</li><li><code>container:xxx</code> &ndash; connect a container to the network namespace of
another container</li><li><code>none</code> &ndash; do not configure any networking</li></ul><p>If you need something more than that, you can use a tool like
<a href=https://github.com/jpetazzo/pipework>pipework</a> to provision additional network interfaces inside the
container, but this leads to a synchronization problem: <code>pipework</code> can
only be used after your container is running. This means that when
starting your container, you must have logic that will wait until the
necessary networking is available before starting your service.</p></div><div><a class="read-more button inline" href=/post/2014-10-06-docker-networking-with-dedicat/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-08-11-four-ways-to-connect-a-docker/>Four ways to connect a docker container to a local network</a></h1><div class=post-meta><time class=post-date>2014-08-11</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;</span><div class=post-content><p><strong>Update (2018-03-22)</strong> Since I wrote this document back in 2014,
Docker has developed the <a href=https://docs.docker.com/network/macvlan/>macvlan network
driver</a>. That gives you a
<em>supported</em> mechanism for direct connectivity to a local layer 2
network. I&rsquo;ve <a href=/2018/03/12/using-docker-macvlan-networks/>written an article about working with the macvlan
driver</a>.</p><hr><p>This article discusses four ways to make a Docker container appear on
a local network. These are not suggested as practical solutions, but
are meant to illustrate some of the underlying network technology
available in Linux.</p></div><div><a class="read-more button inline" href=/post/2014-08-11-four-ways-to-connect-a-docker/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-booting-an-instance-with-multi/>Booting an instance with multiple fixed addresses</a></h1><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>This article expands on my answer to <a href=https://ask.openstack.org/en/question/30690/add-multiple-specific-ips-to-instance/>Add multiple specific IPs to
instance</a>, a question posted to <a href=https://ask.openstack.org/>ask.openstack.org</a>.</p><p>In order to serve out SSL services from an OpenStack instance, you
will generally want one local ip address for each SSL virtual host you
support. It is possible to create an instance with multiple fixed
addresses, but there are a few complications to watch out for.</p><h1 id=assumptions>Assumptions</h1><p>This article assumes that the following resources exist:</p></div><div><a class="read-more button inline" href=/post/2014-05-28-booting-an-instance-with-multi/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>Multiple external networks with a single L3 agent</a></h1><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In the old days (so, like, last year), Neutron supported a single
external network per L3 agent. You would run something like this&mldr;</p><pre><code>$ neutron net-create external --router:external=true
</code></pre><p>&mldr;and neutron would map this to the bridge defined in
<code>external_network_bridge</code> in <code>/etc/neutron/l3_agent.ini</code>. If you
wanted to support more than a single external network, you would need
to run multiple L3 agents, each with a unique value for
<code>external_network_bridge</code>.</p><p>There is now a better option available.</p></div><div><a class="read-more button inline" href=/post/2014-05-28-multiple-external-networks-wit/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-27-configuring-openstacks-externa/>Video: Configuring OpenStack&rsquo;s external bridge on a single-interface system</a></h1><div class=post-meta><time class=post-date>2014-05-27</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;</span><div class=post-content><p>I&rsquo;ve just put a video on Youtube that looks at the steps required to
set up the external bridge (<code>br-ex</code>) on a single-interface system:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/8zFQG5mKwPk?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></div><div><a class="read-more button inline" href=/post/2014-05-27-configuring-openstacks-externa/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-23-open-vswitch-and-persistent-ma/>Open vSwitch and persistent MAC addresses</a></h1><div class=post-meta><time class=post-date>2014-05-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;</span><div class=post-content><p>Normally I like to post solutions, but today&rsquo;s post is about a
vexing problem to which I have not been able to find a solution.</p><p>This started as a simple attempt to set up external connectivity on
an all-in-one Icehouse install deployed on an OpenStack instance. I
wanted to add <code>eth0</code> to <code>br-ex</code> in order to model a typical method for
providing external connectivity, but I ran into a very odd problem:
the system would boot and work fine for a few seconds, but would then
promptly lose network connectivity.</p></div><div><a class="read-more button inline" href=/post/2014-05-23-open-vswitch-and-persistent-ma/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-23-solved-open-vswitch-and-persis/>Solved: Open vSwitch and persistent MAC addresses</a></h1><div class=post-meta><time class=post-date>2014-05-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In my <a href=/2014/05/23/open-vswitch-and-persistent-ma/>previous post</a> I discussed a problem I was having setting a
persistent MAC address on an OVS bridge device. It looks like the
short answer is, &ldquo;don&rsquo;t use <code>ip link set ...</code>&rdquo; for this purpose.</p><p>You can set the bridge MAC address via <code>ovs-vsctl</code> like this:</p><pre><code>ovs-vsctl set bridge br-ex other-config:hwaddr=$MACADDR
</code></pre><p>So I&rsquo;ve updated my <code>ifconfig-br-ex</code> to look like this:</p><pre><code>DEVICE=br-ex
DEVICETYPE=ovs
TYPE=OVSBridge
ONBOOT=yes
OVSBOOTPROTO=dhcp
OVSDHCPINTERFACES=eth0
MACADDR=fa:16:3e:ef:91:ec
OVS_EXTRA=&quot;set bridge br-ex other-config:hwaddr=$MACADDR&quot;
</code></pre><p>The <code>OVS_EXTRA</code> parameter gets passed to the <code>add-br</code> call like this:</p></div><div><a class="read-more button inline" href=/post/2014-05-23-solved-open-vswitch-and-persis/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-20-fedora-and-ovs-bridge-interfac/>Fedora and OVS Bridge Interfaces</a></h1><div class=post-meta><time class=post-date>2014-05-20</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/fedora/>fedora</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>I run OpenStack on my laptop, and I&rsquo;ve been chasing down a pernicious
problem with OVS bridge interfaces under both F19 and F20. My
OpenStack environment relies on an OVS bridge device named <code>br-ex</code> for
external connectivity and for making services available to OpenStack
instances, but after rebooting, <code>br-ex</code> was consistently unconfigured,
which caused a variety of problems.</p><p>This is the network configuration file for <code>br-ex</code> on my system:</p><pre><code>DEVICE=br-ex
DEVICETYPE=ovs
TYPE=OVSBridge
BOOTPROT=static
IPADDR=192.168.200.1
NETMASK=255.255.255.0
ONBOOT=yes
NM_CONTROLLED=no
ZONE=openstack
</code></pre><p>Running <code>ifup br-ex</code> would also fail to configure the interface, but
running <code>ifdown br-ex; ifup br-ex</code> would configure things
appropriately.</p></div><div><a class="read-more button inline" href=/post/2014-05-20-fedora-and-ovs-bridge-interfac/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-20-firewalld-and-openstack/>Firewalld, NetworkManager, and OpenStack</a></h1><div class=post-meta><time class=post-date>2014-05-20</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/firewalld/>firewalld</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networkmanager/>NetworkManager</a>&nbsp;</span><div class=post-content><p>These are my notes on making OpenStack play well with <a href=https://fedoraproject.org/wiki/FirewallD>firewalld</a>
and <a href=https://wiki.gnome.org/Projects/NetworkManager>NetworkManager</a>.</p><h2 id=networkmanager>NetworkManager</h2><p>By default, NetworkManager attempts to start a DHCP client on every
new available interface. Since booting a single instance in OpenStack
can result in the creation of several virtual interfaces, this results
in a lot of:</p><pre><code>May 19 11:58:24 pk115wp-lkellogg NetworkManager[1357]: &lt;info&gt;
  Activation (qvb512640bd-ee) starting connection 'Wired connection 2'
</code></pre><p>You can disable this behavior by adding the following to
<code>/etc/NetworkManager/NetworkManager.conf</code>:</p></div><div><a class="read-more button inline" href=/post/2014-05-20-firewalld-and-openstack/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/tags/networking/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/tags/networking/page/3/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>