<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>gpxe on blog.oddbit.com</title><link>https://blog.oddbit.com/tags/gpxe/</link><description>Recent content in gpxe on blog.oddbit.com</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Lars Kellogg-Stedman</copyright><lastBuildDate>Thu, 22 Jul 2010 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.oddbit.com/tags/gpxe/rss.xml" rel="self" type="application/rss+xml"/><item><title>Patch to gPXE dhcp command</title><link>https://blog.oddbit.com/post/2010-07-22-patch-to-gpxe-dhcp-command/</link><pubDate>Thu, 22 Jul 2010 00:00:00 +0000</pubDate><guid>https://blog.oddbit.com/post/2010-07-22-patch-to-gpxe-dhcp-command/</guid><description>Update: This patch has been accepted into gPXE.
I just released a patch to gPXE that modifies the dhcp command so that it can iterate over multiple interfaces. The stock dhcp command only accepts a single interface as an argument, which can be a problem if you are trying to boot on a machine with multiple interfaces. The builtin autoboot commands attempts to resolve this, but is only useful if you expect to receive appropriate boot parameters from your dhcp server.</description><content>&lt;p>&lt;strong>Update&lt;/strong>: This patch has been &lt;a href="http://git.etherboot.org/?p=gpxe.git;a=commit;h=fa91c2c3269554df855107a24afec9a1149fee8f">accepted&lt;/a> into gPXE.&lt;/p>
&lt;p>I just released a &lt;a href="http://gist.github.com/486907">patch&lt;/a> to &lt;a href="http://etherboot.org/wiki/index.php">gPXE&lt;/a> that modifies the dhcp command so that it can iterate over multiple interfaces. The stock dhcp command only accepts a single interface as an argument, which can be a problem if you are trying to boot on a machine with multiple interfaces. The builtin autoboot commands attempts to resolve this, but is only useful if you expect to receive appropriate boot parameters from your dhcp server.&lt;/p>
&lt;p>My patch extends the dhcp command in the following ways:&lt;/p>
&lt;ol>
&lt;li>It allows the &amp;ldquo;dhcp&amp;rdquo; command to accept a list of interfaces and to try them in order until it succeeds, e.g.:&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>gPXE&amp;gt; dhcp net0 net1 net2
&lt;/code>&lt;/pre>
&lt;p>In order to preserve the original syntax of the command, this will fail on an unknown interface name:&lt;/p>
&lt;pre>&lt;code>gPXE&amp;gt; dhcp foo net0
No such interface: foo
gPXE&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>The &amp;ldquo;-c&amp;rdquo; flag allows it to continue:&lt;/p>
&lt;pre>&lt;code>gPXE&amp;gt; dhcp -c foo net0
No such interface: foo
DHCP (net0 xx:xx:xx:xx:xx:xx).... ok
gPXE&amp;gt;
&lt;/code>&lt;/pre>
&lt;ol start="2">
&lt;li>If given the single parameter &amp;ldquo;any&amp;rdquo; as an interface name, iterate over all known interfaces in a manner similar to autoboot():&lt;/li>
&lt;/ol>
&lt;pre>&lt;code>gPXE&amp;gt; dhcp any
DHCP (net0 xx:xx:xx:xx:xx:xx)........ Connection timed out (...)
Could not configure net0: Connection timed out (...)
DHCP (net1 xx:xx:xx:xx:xx:xx).... ok
gPXE&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>I think this manages to preserve the syntax of the existing &amp;ldquo;dhcp&amp;rdquo; command while making the magic of autoboot available to gpxe scripts.&lt;/p></content></item></channel></rss>