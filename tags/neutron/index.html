<!doctype html><html lang=en><head><title>Neutron :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/tags/neutron/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Neutron"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/tags/neutron/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/tags/neutron/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><h1>Posts for: #Neutron</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-08-13-provider-external-networks-det/>Provider external networks (in an appropriate amount of detail)</a></h1><div class=post-meta><time class=post-date>2015-08-13</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In <a href=https://blog.oddbit.com/post/2013-11-14-quantum-in-too-much-detail/>Quantum in Too Much Detail</a>, I discussed the architecture of a
Neutron deployment in detail. Since that article was published,
Neutron gained the ability to handle multiple external networks with a
single L3 agent. While I <a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>wrote about that</a> back in 2014, I
covered the configuration side of it in much more detail than I
discussed the underlying network architecture. This post addresses
the architecture side.</p><h2 id=the-players>The players</h2><p>This document describes the architecture that results from a
particular OpenStack configuration, specifically:</p></div><div><a class="read-more button inline" href=/post/2015-08-13-provider-external-networks-det/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-06-26-openstack-networking-without-d/>OpenStack Networking without DHCP</a></h1><div class=post-meta><time class=post-date>2015-06-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/nova/>nova</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cloud-init/>cloud-init</a>&nbsp;</span><div class=post-content><p>In an OpenStack environment, <a href=https://cloudinit.readthedocs.org/en/latest/>cloud-init</a> generally fetches
information from the metadata service provided by Nova. It also has
support for reading this information from a <em>configuration drive</em>,
which under OpenStack means a virtual CD-ROM device attached to your
instance containing the same information that would normally be
available via the metadata service.</p><p>It is possible to generate your network configuration from this
configuration drive, rather than relying on the DHCP server provided
by your OpenStack environment. In order to do this you will need to
make the following changes to your Nova configuration:</p></div><div><a class="read-more button inline" href=/post/2015-06-26-openstack-networking-without-d/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-12-10-cloudinit-and-the-case-of-the-/>Cloud-init and the case of the changing hostname</a></h1><div class=post-meta><time class=post-date>2014-12-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/rdo/>rdo</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;</span><div class=post-content><h2 id=setting-the-stage>Setting the stage</h2><p>I ran into a problem earlier this week deploying RDO Icehouse under
RHEL 6. My target systems were a set of libvirt guests deployed from
the RHEL 6 KVM guest image, which includes <a href=https://cloudinit.readthedocs.org/en/latest/>cloud-init</a> in order to
support automatic configuration in cloud environments. I take
advantage of this when using <code>libvirt</code> by attaching a configuration
drive so that I can pass in ssh keys and a <code>user-data</code> script.</p></div><div><a class="read-more button inline" href=/post/2014-12-10-cloudinit-and-the-case-of-the-/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-booting-an-instance-with-multi/>Booting an instance with multiple fixed addresses</a></h1><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>This article expands on my answer to <a href=https://ask.openstack.org/en/question/30690/add-multiple-specific-ips-to-instance/>Add multiple specific IPs to
instance</a>, a question posted to <a href=https://ask.openstack.org/>ask.openstack.org</a>.</p><p>In order to serve out SSL services from an OpenStack instance, you
will generally want one local ip address for each SSL virtual host you
support. It is possible to create an instance with multiple fixed
addresses, but there are a few complications to watch out for.</p><h1 id=assumptions>Assumptions</h1><p>This article assumes that the following resources exist:</p></div><div><a class="read-more button inline" href=/post/2014-05-28-booting-an-instance-with-multi/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>Multiple external networks with a single L3 agent</a></h1><div class=post-meta><time class=post-date>2014-05-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In the old days (so, like, last year), Neutron supported a single
external network per L3 agent. You would run something like this&mldr;</p><pre><code>$ neutron net-create external --router:external=true
</code></pre><p>&mldr;and neutron would map this to the bridge defined in
<code>external_network_bridge</code> in <code>/etc/neutron/l3_agent.ini</code>. If you
wanted to support more than a single external network, you would need
to run multiple L3 agents, each with a unique value for
<code>external_network_bridge</code>.</p><p>There is now a better option available.</p></div><div><a class="read-more button inline" href=/post/2014-05-28-multiple-external-networks-wit/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-05-19-flat-networks-with-ml-and-open/>Flat networks with ML2 and OpenVSwitch</a></h1><div class=post-meta><time class=post-date>2014-05-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;</span><div class=post-content><p>Due to an unfortunate incident involving sleep mode and an overheated
backpack I had the &ldquo;opportunity&rdquo; to rebuild my laptop. Since this meant
reinstalling OpenStack I used this as an excuse to finally move to the ML2
network plugin for Neutron.</p><p>I was attempting to add an external network using the normal incantation:</p><pre><code>neutron net-create external -- --router:external=true \
    --provider:network_type=flat \
    --provider:physical_network=physnet1
</code></pre><p>While this command completed successfully, I was left without any
connectivity between <code>br-int</code> and <code>br-ex</code>, despite having in my
<code>/etc/neutron/plugins/ml2/ml2_conf.ini</code>:</p></div><div><a class="read-more button inline" href=/post/2014-05-19-flat-networks-with-ml-and-open/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-12-23-visualizing-network-with-graph/>Visualizing Neutron Networking with GraphViz</a></h1><div class=post-meta><time class=post-date>2013-12-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>I&rsquo;ve put together a few tools to help gather information about your
Neutron and network configuration and visualize it in different ways.
All of these tools are available as part of my <a href=http://github.com/larsks/neutron-diag/>neutron-diag</a>
repository on GitHub.</p><p>In this post I&rsquo;m going to look at a tool that will help you visualize
the connectivity of network devices on your system.</p><h2 id=mk-network-dot>mk-network-dot</h2><p>There are a lot of devices involved in your Neutron network
configuration. Information originating in one of your instances has
two traverse <em>at least</em> seven network devices before seeing the light
of day. Understanding how everything connects is critical if you&rsquo;re
trying to debug problems in your envionment.</p></div><div><a class="read-more button inline" href=/post/2013-12-23-visualizing-network-with-graph/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-12-06-an-introduction-to-openstack-h/>An introduction to OpenStack Heat</a></h1><div class=post-meta><time class=post-date>2013-12-06</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/heat/>heat</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;</span><div class=post-content><p><a href=https://wiki.openstack.org/wiki/Heat>Heat</a> is a template-based orchestration mechanism for use with
OpenStack. With Heat, you can deploy collections of resources &ndash;
networks, servers, storage, and more &ndash; all from a single,
parameterized template.</p><p>In this article I will introduce Heat templates and the <code>heat</code> command
line client.</p><h2 id=writing-templates>Writing templates</h2><p>Because Heat began life as an analog of AWS <a href=http://aws.amazon.com/cloudformation/>CloudFormation</a>, it
supports the template formats used by the CloudFormation (CFN) tools.
It also supports its own native template format, called HOT (&ldquo;Heat
Orchestration Templates&rdquo;). In this article I will be using the HOT
template syntax, which is fully specified on <a href=http://docs.openstack.org/developer/heat/template_guide/hot_spec.html>the OpenStack
website</a>.</p></div><div><a class="read-more button inline" href=/post/2013-12-06-an-introduction-to-openstack-h/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2013-10-28-why-does-the-neutron/>Why does the Neutron documentation recommend three interfaces?</a></h1><div class=post-meta><time class=post-date>2013-10-28</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>The <a href=http://docs.openstack.org/havana/install-guide/install/yum/content/neutron-install.dedicated-network-node.html>documentation for configuring Neutron</a> recommends
that a network controller has three physical interfaces:</p><blockquote><p>Before you start, set up a machine to be a dedicated network node.
Dedicated network nodes should have the following NICs: the
management NIC (called MGMT_INTERFACE), the data NIC (called
DATA_INTERFACE), and the external NIC (called EXTERNAL_INTERFACE).</p></blockquote><p>People occasionally ask, &ldquo;why three interfaces? What if I only have
two?&rdquo;, so I wanted to provide an extended answer that might help
people understand what the interfaces are for and what trade-offs are
involved in using fewer interfaces.</p></div><div><a class="read-more button inline" href=/post/2013-10-28-why-does-the-neutron/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>