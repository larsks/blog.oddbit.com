<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Github on blog.oddbit.com</title><link>https://blog.oddbit.com/tags/github/</link><description>Recent content in Github on blog.oddbit.com</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Lars Kellogg-Stedman</copyright><lastBuildDate>Thu, 22 Sep 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.oddbit.com/tags/github/rss.xml" rel="self" type="application/rss+xml"/><item><title>Delete GitHub workflow runs using the gh cli</title><link>https://blog.oddbit.com/post/2022-09-22-delete-workflow-runs/</link><pubDate>Thu, 22 Sep 2022 00:00:00 +0000</pubDate><guid>https://blog.oddbit.com/post/2022-09-22-delete-workflow-runs/</guid><description>&lt;p>Hello, future me. This is for you next time you want to do this.&lt;/p>
&lt;p>When setting up the CI for a project I will sometimes end up with a tremendous clutter of workflow runs. Sometimes they have embarrassing mistakes. Who wants to show that to people? I was trying to figure out how to bulk delete workflow runs from the CLI, and I came up with something that works:&lt;/p>
&lt;pre tabindex="0">&lt;code>gh run list --json databaseId -q &amp;#39;.[].databaseId&amp;#39; |
xargs -IID gh api \
&amp;#34;repos/$(gh repo view --json nameWithOwner -q .nameWithOwner)/actions/runs/ID&amp;#34; \
-X DELETE
&lt;/code>&lt;/pre>&lt;p>This will delete &lt;em>all&lt;/em> (well, up to 20, or whatever you set in &lt;code>--limit&lt;/code>) your workflow runs. You can add flags to &lt;code>gh run list&lt;/code> to filter runs by workflow or by triggering user.&lt;/p></description><content>&lt;p>Hello, future me. This is for you next time you want to do this.&lt;/p>
&lt;p>When setting up the CI for a project I will sometimes end up with a tremendous clutter of workflow runs. Sometimes they have embarrassing mistakes. Who wants to show that to people? I was trying to figure out how to bulk delete workflow runs from the CLI, and I came up with something that works:&lt;/p>
&lt;pre tabindex="0">&lt;code>gh run list --json databaseId -q &amp;#39;.[].databaseId&amp;#39; |
xargs -IID gh api \
&amp;#34;repos/$(gh repo view --json nameWithOwner -q .nameWithOwner)/actions/runs/ID&amp;#34; \
-X DELETE
&lt;/code>&lt;/pre>&lt;p>This will delete &lt;em>all&lt;/em> (well, up to 20, or whatever you set in &lt;code>--limit&lt;/code>) your workflow runs. You can add flags to &lt;code>gh run list&lt;/code> to filter runs by workflow or by triggering user.&lt;/p></content></item><item><title>Git Etiquette: Commit messages and pull requests</title><link>https://blog.oddbit.com/post/2019-06-14-git-etiquette-commit-messages/</link><pubDate>Fri, 14 Jun 2019 00:00:00 +0000</pubDate><guid>https://blog.oddbit.com/post/2019-06-14-git-etiquette-commit-messages/</guid><description>&lt;h2 id="always-work-on-a-branch-never-commit-on-master">Always work on a branch (never commit on master)&lt;/h2>
&lt;p>When working with an upstream codebase, always make your changes on a feature branch rather than your local &lt;code>master&lt;/code> branch. This will make it easier to keep your local &lt;code>master&lt;/code> branch current with respect to upstream, and can help avoid situations in which you accidentally overwrite your local changes or introduce unnecessary merge commits into your history.&lt;/p>
&lt;h2 id="rebase-instead-of-merge">Rebase instead of merge&lt;/h2>
&lt;p>If you need to incorporate changes from the upstream &lt;code>master&lt;/code> branch in the feature branch on which you are currently doing, bring in those changes using &lt;code>git rebase&lt;/code> rather than &lt;code>git merge&lt;/code>. This process will generally start by ensuring that your local copy of the upstream &lt;code>master&lt;/code> is current:&lt;/p></description><content>&lt;h2 id="always-work-on-a-branch-never-commit-on-master">Always work on a branch (never commit on master)&lt;/h2>
&lt;p>When working with an upstream codebase, always make your changes on a feature branch rather than your local &lt;code>master&lt;/code> branch. This will make it easier to keep your local &lt;code>master&lt;/code> branch current with respect to upstream, and can help avoid situations in which you accidentally overwrite your local changes or introduce unnecessary merge commits into your history.&lt;/p>
&lt;h2 id="rebase-instead-of-merge">Rebase instead of merge&lt;/h2>
&lt;p>If you need to incorporate changes from the upstream &lt;code>master&lt;/code> branch in the feature branch on which you are currently doing, bring in those changes using &lt;code>git rebase&lt;/code> rather than &lt;code>git merge&lt;/code>. This process will generally start by ensuring that your local copy of the upstream &lt;code>master&lt;/code> is current:&lt;/p>
&lt;pre tabindex="0">&lt;code>git remote update
&lt;/code>&lt;/pre>&lt;p>Followed by rebasing your changes on top of that branch:&lt;/p>
&lt;pre tabindex="0">&lt;code>git rebase origin/master
&lt;/code>&lt;/pre>&lt;h2 id="make-your-commit-messages-meaningful">Make your commit messages meaningful&lt;/h2>
&lt;p>Your commit messages should follow common best practices, such as &lt;a href="https://wiki.openstack.org/wiki/GitCommitMessages">those documented for OpenStack&lt;/a>. In general, this means:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Your commit message should have the subject on the first line, then a blank line, then the message body.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The message body should be wrapped at around 75 characters.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Your commit message should succinctly describe &lt;em>what&lt;/em> was changed and &lt;em>why&lt;/em> it was changed.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If your commit is associated with a bug, user story, task, or other tracking mechanism, include a reference to the appropriate item in your commit message.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="example-of-bad-commit-messages">Example of bad commit messages&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>This should probably have been squashed with the commit that introduced the typo:&lt;/p>
&lt;pre tabindex="0">&lt;code>Fixed a typo.
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>This doesn&amp;rsquo;t provide sufficient details:&lt;/p>
&lt;pre tabindex="0">&lt;code>Trying that thing again
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Changes necessary to resolve merge conflicts should generally be squashed into the commits that introduce the conflict:&lt;/p>
&lt;pre tabindex="0">&lt;code>Fixing merge conflicts
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h3 id="example-of-good-commit-messages">Example of good commit messages&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>A constructed example:&lt;/p>
&lt;pre tabindex="0">&lt;code>Support new &amp;#34;description&amp;#34; field on all widgets (TG-100)
Update both the database model and the web UI to support an extended
&amp;#34;description&amp;#34; field on all objects. This allows us to generate more useful
product listings.
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>from &lt;a href="https://github.com/openstack/ironic/commit/6ca99d67302d7e1b639ad9b745631e65a4b2f25c">https://github.com/openstack/ironic/commit/6ca99d67302d7e1b639ad9b745631e65a4b2f25c&lt;/a>:&lt;/p>
&lt;pre tabindex="0">&lt;code>Add release note updating status of smartnics
Smartnic support merged into Neutron a few weeks ago,
and as we downplayed the functionality during the Stein
cycle, we should highlight it during Train since it should
now be available.
Change-Id: I19372a0ede703f62940bbb2cc3a80618560ebc93
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>from &lt;a href="https://github.com/ansible/ansible/commit/88a1fc28d894575d48edc3817cc1a8ef4dca3cae">https://github.com/ansible/ansible/commit/88a1fc28d894575d48edc3817cc1a8ef4dca3cae&lt;/a>:&lt;/p>
&lt;pre tabindex="0">&lt;code>Clean up iosxr get_config_diff function (#57589)
This fixes an index error issue when running tests on zuul.ansible.com
for iosxr. We can fix this by getting the last element in the list.
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ol>
&lt;h2 id="fix-typos-by-amending-or-rebasing">Fix typos by amending or rebasing&lt;/h2>
&lt;p>If before your pull request has merged you realize you need to fix a typo or other error, do not create a new commit with the correction.&lt;/p>
&lt;p>If the typo is in the most recent commit, simply fix it, &lt;code>git add&lt;/code> the change, and then use &lt;code>git commit --amend&lt;/code> to update the latest commit.&lt;/p>
&lt;p>If the typo is &lt;strong>not&lt;/strong> in the latest commit, then use &lt;code>git rebase&lt;/code> to edit the commit. The procedure will look something like this:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Assuming that your branch is based on &lt;code>origin/master&lt;/code>, run &lt;code>git rebase -i origin/master&lt;/code>. This will bring up the &amp;ldquo;pick list&amp;rdquo;, which allows you to select among various actions for each commit between &lt;code>origin/master&lt;/code> and your current branch. For example:&lt;/p>
&lt;pre tabindex="0">&lt;code>pick 6ca99d673 Add release note updating status of smartnics
pick c2ab34a8c Do not log an exception if Allocation is deleted during handling.
pick 87464fbbc Change constraints opendev.org to release.openstack.org
pick 43f7bf9f0 Fix :param: in docstring
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Change &lt;code>pick&lt;/code> to &lt;code>edit&lt;/code> for the commit you wish to edit, then exit your editor.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Make the necessary change, then &lt;code>git add&lt;/code> your modified files and then &lt;code>git rebase --continue&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>In either of the above situations, when you have committed the changes locally, run &lt;code>git push -f&lt;/code> to update the remote branch on GitHub (which will in turn update your pull request).&lt;/p>
&lt;h2 id="have-one-commit-per-logical-change-and-one-major-feature-per-pull-request">Have one commit per logical change and one major feature per pull request&lt;/h2>
&lt;p>When you submit a pull request, all the commits associated with that pull request should be related to the same major feature. For example, if you made the follow changes:&lt;/p>
&lt;ul>
&lt;li>Fixed bug #1234&lt;/li>
&lt;li>Wrote new feature discussed at last planning session&lt;/li>
&lt;/ul>
&lt;p>Those should be two separate pull requests. On the other hand, if you have instead made these changes:&lt;/p>
&lt;ul>
&lt;li>Wrote new feature discussed at last planning session&lt;/li>
&lt;li>Wrote documentation for new feature&lt;/li>
&lt;li>Wrote tests for new feature&lt;/li>
&lt;/ul>
&lt;p>Those could all be made part of the same pull request.&lt;/p>
&lt;p>Within your pull request, there should be a single commit for each logical change. For example rather than:&lt;/p>
&lt;ul>
&lt;li>Started documentation for new feature&lt;/li>
&lt;li>Made changes to documentation based on review&lt;/li>
&lt;li>Reformatted documentation to fix syntax error&lt;/li>
&lt;/ul>
&lt;p>You should have a single commit:&lt;/p>
&lt;ul>
&lt;li>Write documentation for new feature&lt;/li>
&lt;/ul>
&lt;p>You should use &lt;code>git commit --amend&lt;/code> or &lt;code>git rebase&lt;/code>, as discussed earlier, to keep your commits topical and organized.&lt;/p></content></item><item><title>New comment system</title><link>https://blog.oddbit.com/post/2019-05-07-new-comment-system/</link><pubDate>Tue, 07 May 2019 09:00:00 +0000</pubDate><guid>https://blog.oddbit.com/post/2019-05-07-new-comment-system/</guid><description>&lt;p>As long as I&amp;rsquo;m switching site generators, it seems like a good idea to refresh the comment system as well. I&amp;rsquo;ve been using &lt;a href="https://disqus.com">Disqus&lt;/a> for a while, since when I started it was one of the only games in town. There are now alternatives of different sorts, and one in particular caught my eye: &lt;a href="https://utteranc.es/">Utterances&lt;/a> uses GitHub issues for storing comments, which seems like a fantastic idea.&lt;/p>
&lt;p>That means that comments will finally be stored in the same place as the blog content, which I think is a happy state of affairs.&lt;/p></description><content>&lt;p>As long as I&amp;rsquo;m switching site generators, it seems like a good idea to refresh the comment system as well. I&amp;rsquo;ve been using &lt;a href="https://disqus.com">Disqus&lt;/a> for a while, since when I started it was one of the only games in town. There are now alternatives of different sorts, and one in particular caught my eye: &lt;a href="https://utteranc.es/">Utterances&lt;/a> uses GitHub issues for storing comments, which seems like a fantastic idea.&lt;/p>
&lt;p>That means that comments will finally be stored in the same place as the blog content, which I think is a happy state of affairs.&lt;/p></content></item></channel></rss>