<!doctype html><html lang=en><head><title>Kubernetes :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/tags/kubernetes/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Kubernetes"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/tags/kubernetes/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/tags/kubernetes/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><h1>Posts for: #Kubernetes</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2023-11-17-nginx-gateway-configuration/>Applying custom configuration to Nginx Gateway Fabric</a></h1><div class=post-meta><time class=post-date>2023-11-17</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/nginx/>nginx</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gateway-api/>gateway-api</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/containers/>containers</a>&nbsp;
</span><img src=/post/2023-11-17-nginx-gateway-configuration/cover.png class=post-cover alt="Applying custom configuration to Nginx Gateway Fabric" title="Cover Image"><div class=post-content><p>In this post, we take a look at how to apply custom Nginx configuration directives when you&rsquo;re using the <a href=https://github.com/nginxinc/nginx-gateway-fabric>NGINX Gateway Fabric</a>.</p><h2 id=whats-the-nginx-gateway-fabric>What&rsquo;s the NGINX Gateway Fabric?</h2><p>The NGINX Gateway Fabric is an implementation of the Kubernetes <a href=https://gateway-api.sigs.k8s.io/>Gateway API</a>.</p><h2 id=whats-the-gateway-api>What&rsquo;s the Gateway API?</h2><p>The Gateway API is an evolution of the <a href=https://kubernetes.io/docs/concepts/services-networking/ingress/>Ingress</a> API; it aims to provide a flexible mechanism for managing north/south network traffic (that is, traffic entering or exiting your Kubernetes cluster), with additional work to support east/west traffic (traffic between pods in your cluster).</p></div><div><a class="read-more button inline" href=/post/2023-11-17-nginx-gateway-configuration/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2022-09-10-kubernetes-labels/>Kubernetes, connection timeouts, and the importance of labels</a></h1><div class=post-meta><time class=post-date>2022-09-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cloud/>cloud</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/labels/>labels</a>&nbsp;
</span><img src=/post/2022-09-10-kubernetes-labels/cover.png class=post-cover alt="Kubernetes, connection timeouts, and the importance of labels" title="Cover Image"><div class=post-content><p>We are working with an application that produces resource utilization reports for clients of our OpenShift-based cloud environments. The developers working with the application have been reporting mysterious issues concerning connection timeouts between the application and the database (a MariaDB instance). For a long time we had only high-level verbal descriptions of the problem (&ldquo;I&rsquo;m seeing a lot of connection timeouts!&rdquo;) and a variety of unsubstantiated theories (from multiple sources) about the cause. Absent a solid reproducer of the behavior in question, we looked at other aspects of our infrastructure:</p></div><div><a class="read-more button inline" href=/post/2022-09-10-kubernetes-labels/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-09-03-kubernetes-external-secrets/>Kubernetes External Secrets</a></h1><div class=post-meta><time class=post-date>2021-09-03</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/secrets/>secrets</a>&nbsp;
</span><img src=/post/2021-09-03-kubernetes-external-secrets/cover.jpg class=post-cover alt="Kubernetes External Secrets" title="Cover Image"><div class=post-content><p>At <em>$JOB</em> we maintain the configuration for our OpenShift clusters in a public git repository. Changes in the git repository are applied automatically using <a href=https://argo-cd.readthedocs.io/en/stable/>ArgoCD</a> and <a href=https://kustomize.io/>Kustomize</a>. This works great, but the public nature of the repository means we need to find a secure solution for managing secrets (such as passwords and other credentials necessary for authenticating to external services). In particular, we need a solution that permits our public repository to be the source of truth for our cluster configuration, without compromising our credentials.</p></div><div><a class="read-more button inline" href=/post/2021-09-03-kubernetes-external-secrets/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-08-23-external-ocs/>Connecting OpenShift to an External Ceph Cluster</a></h1><div class=post-meta><time class=post-date>2021-08-23</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/ceph/>ceph</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ocs/>ocs</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/odf/>odf</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/storage/>storage</a>&nbsp;</span><div class=post-content><p>Red Hat&rsquo;s <a href=https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation>OpenShift Data Foundation</a> (formerly &ldquo;OpenShift
Container Storage&rdquo;, or &ldquo;OCS&rdquo;) allows you to either (a) automatically
set up a Ceph cluster as an application running on your OpenShift
cluster, or (b) connect your OpenShift cluster to an externally
managed Ceph cluster. While setting up Ceph as an OpenShift
application is a relatively polished experienced, connecting to an
external cluster still has some rough edges.</p><p><strong>NB</strong> I am not a Ceph expert. If you read this and think I&rsquo;ve made a
mistake with respect to permissions or anything else, please feel free
to leave a comment and I will update the article as necessary. In
particular, I think it may be possible to further restrict the <code>mgr</code>
permissions shown in this article and I&rsquo;m interested in feedback on
that topic.</p></div><div><a class="read-more button inline" href=/post/2021-08-23-external-ocs/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-03-09-getting-started-with-ksops/>Getting started with KSOPS</a></h1><div class=post-meta><time class=post-date>2021-03-09</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ksops/>ksops</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/gpg/>gpg</a>&nbsp;</span><div class=post-content><p><a href=https://kustomize.io/>Kustomize</a> is a tool for assembling Kubernetes manifests from a
collection of files. We&rsquo;re making extensive use of Kustomize in the
<a href=https://www.operate-first.cloud/>operate-first</a> project. In order to keep secrets stored in our
configuration repositories, we&rsquo;re using the <a href=https://github.com/viaduct-ai/kustomize-sops>KSOPS</a> plugin, which
enables Kustomize to use <a href=https://github.com/mozilla/sops>sops</a> to encrypt/files using GPG.</p><p>In this post, I&rsquo;d like to walk through the steps necessary to get
everything up and running.</p><h2 id=set-up-gpg>Set up GPG</h2><p>We encrypt files using GPG, so the first step is making sure that you
have a GPG keypair and that your public key is published where other
people can find it.</p></div><div><a class="read-more button inline" href=/post/2021-03-09-getting-started-with-ksops/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2021-02-10-object-storage-with-openshift/>Object storage with OpenShift Container Storage</a></h1><div class=post-meta><time class=post-date>2021-02-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openshift/>openshift</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openshift-ocs/>openshift-ocs</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/s3/>s3</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
</span><img src=/post/2021-02-10-object-storage-with-openshift/cover.jpg class=post-cover alt="Object storage with OpenShift Container Storage" title="Cover Image"><div class=post-content><p><a href=https://www.redhat.com/en/technologies/cloud-computing/openshift-container-storage>OpenShift Container Storage</a> (OCS) from Red Hat deploys Ceph in your
OpenShift cluster (or allows you to integrate with an external Ceph
cluster). In addition to the file- and block- based volume services
provided by Ceph, OCS includes two S3-api compatible object storage
implementations.</p><p>The first option is the <a href=https://docs.ceph.com/en/latest/radosgw/>Ceph Object Gateway</a> (radosgw),
Ceph&rsquo;s native object storage interface. The second option called the
&ldquo;<a href=https://www.openshift.com/blog/introducing-multi-cloud-object-gateway-for-openshift>Multicloud Object Gateway</a>&rdquo;, which is in fact a piece of software
named <a href=https://www.noobaa.io/>Noobaa</a>, a storage abstraction layer that was <a href=https://www.redhat.com/en/blog/faq-red-hat-acquires-noobaa>acquired by
Red Hat</a> in 2018. In this article I&rsquo;d like to demonstrate how to
take advantage of these storage options.</p></div><div><a class="read-more button inline" href=/post/2021-02-10-object-storage-with-openshift/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-06-19-heatkubernetes-demo-with-autos/>Heat-kubernetes Demo with Autoscaling</a></h1><div class=post-meta><time class=post-date>2015-06-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/heat/>heat</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/atomic/>atomic</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;</span><div class=post-content><p>Next week is the <a href=http://www.redhat.com/summit/>Red Hat Summit</a> in Boston, and I&rsquo;ll be taking part
in a <a href=http://www.projectatomic.io/>Project Atomic</a> presentation in which I will discuss various
(well, two) options for deploying Atomic into an OpenStack
environment, focusing on my <a href=https://github.com/projectatomic/heat-kubernetes/>heat-kubernetes</a> templates.</p><p>As part of that presentation, I&rsquo;ve put together a short demonstration video:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/tS5X0qi04ZU?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><p>This shows off the autoscaling behavior available with recent versions
of these templates (and also serves as a very brief introduction to
working with Kubernetes).</p></div><div><a class="read-more button inline" href=/post/2015-06-19-heatkubernetes-demo-with-autos/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-02-10-external-networking-for-kubern/>External networking for Kubernetes services</a></h1><div class=post-meta><time class=post-date>2015-02-10</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=post-content><p>I have recently started running some &ldquo;real&rdquo; services (that is,
&ldquo;services being consumed by someone other than myself&rdquo;) on top of
Kubernetes (running on bare metal), which means I suddenly had to
confront the question of how to provide external access to Kubernetes
hosted services. Kubernetes provides two solutions to this problem,
neither of which is particularly attractive out of the box:</p><ol><li><p>There is a field <code>createExternalLoadBalancer</code> that can be set in a
service description. This is meant to integrate with load
balancers provided by your local cloud environment, but at the
moment there is only support for this when running under <a href=https://cloud.google.com/compute/>GCE</a>.</p></div><div><a class="read-more button inline" href=/post/2015-02-10-external-networking-for-kubern/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-01-04-building-a-minimal-web-server-/>Building a minimal web server for testing Kubernetes</a></h1><div class=post-meta><time class=post-date>2015-01-04</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;</span><div class=post-content><p>I have recently been doing some work with <a href=https://github.com/googlecloudplatform/kubernetes>Kubernetes</a>, and wanted
to put together a minimal image with which I could test service and
pod deployment. Size in this case was critical: I wanted something
that would download quickly when initially deployed, because I am
often setting up and tearing down Kubernetes as part of my testing
(and some of my test environments have poor external bandwidth).</p><h2 id=building-thttpd>Building thttpd</h2><p>My go-to minimal webserver is <a href=http://acme.com/software/thttpd/>thttpd</a>. For the normal case,
building the software is a simple matter of <code>./configure</code> followed by
<code>make</code>. This gets you a dynamically linked binary; using <code>ldd</code> you
could build a Docker image containing only the necessary shared
libraries:</p></div><div><a class="read-more button inline" href=/post/2015-01-04-building-a-minimal-web-server-/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2014-11-24-fedora-atomic-openstack-and-ku/>Fedora Atomic, OpenStack, and Kubernetes (oh my)</a></h1><div class=post-meta><time class=post-date>2014-11-24</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/fedora/>fedora</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/atomic/>atomic</a>&nbsp;</span><div class=post-content><p>While experimenting with <a href=http://www.projectatomic.io/>Fedora Atomic</a>, I was looking for an
elegant way to automatically deploy Atomic into an <a href=http://openstack.org/>OpenStack</a>
environment and then automatically schedule some <a href=http://docker.com/>Docker</a> containers
on the Atomic host. This post describes my solution.</p><p>Like many other cloud-targeted distributions, Fedora Atomic runs
<a href=http://cloudinit.readthedocs.org/>cloud-init</a> when the system boots. We can take advantage of this
to configure the system at first boot by providing a <code>user-data</code> blob
to Nova when we boot the instance. A <code>user-data</code> blob can be as
simple as a shell script, and while we could arguably mash everything
into a single script it wouldn&rsquo;t be particularly maintainable or
flexible in the face of different pod/service/etc descriptions.</p></div><div><a class="read-more button inline" href=/post/2014-11-24-fedora-atomic-openstack-and-ku/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/tags/kubernetes/page/2/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>