<!doctype html><html lang=en><head><title>Openstack :: blog.oddbit.com</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://blog.oddbit.com/tags/openstack/><script async src="https://www.googletagmanager.com/gtag/js?id=G-G1FYT93ENG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G1FYT93ENG")}</script><link rel=stylesheet href=https://blog.oddbit.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://blog.oddbit.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://blog.oddbit.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://blog.oddbit.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://blog.oddbit.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://blog.oddbit.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://blog.oddbit.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://blog.oddbit.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://blog.oddbit.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://blog.oddbit.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://blog.oddbit.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://blog.oddbit.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://blog.oddbit.com/style.css><link rel="shortcut icon" href=https://blog.oddbit.com/favicon.png><link rel=apple-touch-icon href=https://blog.oddbit.com/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Openstack"><meta property="og:description" content><meta property="og:url" content="https://blog.oddbit.com/tags/openstack/"><meta property="og:site_name" content="blog.oddbit.com"><meta property="og:image" content="https://blog.oddbit.com/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=/tags/openstack/rss.xml rel=alternate type=application/rss+xml title=blog.oddbit.com></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>the odd bit blog</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/>/</a></li><li><a href=https://oddbit.com>/about</a></li><li><a href=/posts>/posts</a></li><li><a href=/tags>/tags</a></li><li><a href=/archive>/archive</a></li><li><a href=/rss.xml>/feed</a></li><li><ul class=menu><li class=menu__trigger>&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://github.com/larsks>→Github</a></li><li><a href=https://hachyderm.io/@larsks>→Mastodon</a></li><li><a href=https://twitter.com/larsks>→Twitter</a></li></ul></li></ul></li></ul></nav></header><div class=content><h1>Posts for: #Openstack</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-10-26-ansible-20-new-openstack-modul/>Ansible 2.0: New OpenStack modules</a></h1><div class=post-meta><time class=post-date>2015-10-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/ansible/>ansible</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/ansible_20_series/>ansible_20_series</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/pull-request/>pull-request</a>&nbsp;</span><div class=post-content><p>This is the second in a loose sequence of articles looking at new
features in Ansible 2.0. In the previous article I looked at the
<a href=https://blog.oddbit.com/post/2015-10-13-ansible-20-the-docker-connecti/>Docker connection driver</a>. In this article, I would like to
provide an overview of the new-and-much-improved suite of modules for
interacting with an <a href=http://www.openstack.org/>OpenStack</a> environment, and provide a few
examples of their use.</p><p>In versions of Ansible prior to 2.0, there was a small collection of
OpenStack modules. There was the minimum necessary to boot a Nova
instance:</p></div><div><a class="read-more button inline" href=/post/2015-10-26-ansible-20-new-openstack-modul/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-09-29-migrating-cinder-volumes-betwe/>Migrating Cinder volumes between OpenStack environments using shared NFS storage</a></h1><div class=post-meta><time class=post-date>2015-09-29</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cinder/>cinder</a>&nbsp;</span><div class=post-content><p>Many of the upgrade guides for OpenStack focus on in-place upgrades to
your OpenStack environment. Some organizations may opt for a less
risky (but more hardware intensive) option of setting up a parallel
environment, and then migrating data into the new environment. In
this article, we look at how to use Cinder backups with a shared NFS
volume to facilitate the migration of Cinder volumes between two
different OpenStack environments.</p></div><div><a class="read-more button inline" href=/post/2015-09-29-migrating-cinder-volumes-betwe/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-08-13-provider-external-networks-det/>Provider external networks (in an appropriate amount of detail)</a></h1><div class=post-meta><time class=post-date>2015-08-13</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openvswitch/>openvswitch</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/networking/>networking</a>&nbsp;</span><div class=post-content><p>In <a href=https://blog.oddbit.com/post/2013-11-14-quantum-in-too-much-detail/>Quantum in Too Much Detail</a>, I discussed the architecture of a
Neutron deployment in detail. Since that article was published,
Neutron gained the ability to handle multiple external networks with a
single L3 agent. While I <a href=https://blog.oddbit.com/post/2014-05-28-multiple-external-networks-wit/>wrote about that</a> back in 2014, I
covered the configuration side of it in much more detail than I
discussed the underlying network architecture. This post addresses
the architecture side.</p><h2 id=the-players>The players</h2><p>This document describes the architecture that results from a
particular OpenStack configuration, specifically:</p></div><div><a class="read-more button inline" href=/post/2015-08-13-provider-external-networks-det/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-07-26-in-which-we-are-amazed-it-does/>In which we are amazed it doesn&rsquo;t all fall apart</a></h1><div class=post-meta><time class=post-date>2015-07-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/rant/>rant</a>&nbsp;</span><div class=post-content><p>So, the Kilo release notes say:</p><pre><code>nova-manage migrate-flavor-data
</code></pre><p>But nova-manage says:</p><pre><code>nova-manage db migrate_flavor_data
</code></pre><p>But that says:</p><pre><code>Missing arguments: max_number
</code></pre><p>And the help says:</p><pre><code>usage: nova-manage db migrate_flavor_data [-h]
  [--max-number &lt;number&gt;]
</code></pre><p>Which indicates that &ndash;max-number is optional, but whatever, so you
try:</p><pre><code>nova-manage db migrate_flavor_data --max-number 100
</code></pre><p>And that says:</p><pre><code>Missing arguments: max_number
</code></pre><p>So just for kicks you try:</p><pre><code>nova-manage db migrate_flavor_data --max_number 100
</code></pre><p>And that says:</p></div><div><a class="read-more button inline" href=/post/2015-07-26-in-which-we-are-amazed-it-does/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-06-26-openstack-networking-without-d/>OpenStack Networking without DHCP</a></h1><div class=post-meta><time class=post-date>2015-06-26</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/nova/>nova</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/neutron/>neutron</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/cloud-init/>cloud-init</a>&nbsp;</span><div class=post-content><p>In an OpenStack environment, <a href=https://cloudinit.readthedocs.org/en/latest/>cloud-init</a> generally fetches
information from the metadata service provided by Nova. It also has
support for reading this information from a <em>configuration drive</em>,
which under OpenStack means a virtual CD-ROM device attached to your
instance containing the same information that would normally be
available via the metadata service.</p><p>It is possible to generate your network configuration from this
configuration drive, rather than relying on the DHCP server provided
by your OpenStack environment. In order to do this you will need to
make the following changes to your Nova configuration:</p></div><div><a class="read-more button inline" href=/post/2015-06-26-openstack-networking-without-d/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-06-19-heatkubernetes-demo-with-autos/>Heat-kubernetes Demo with Autoscaling</a></h1><div class=post-meta><time class=post-date>2015-06-19</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/heat/>heat</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/kubernetes/>kubernetes</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/atomic/>atomic</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;</span><div class=post-content><p>Next week is the <a href=http://www.redhat.com/summit/>Red Hat Summit</a> in Boston, and I&rsquo;ll be taking part
in a <a href=http://www.projectatomic.io/>Project Atomic</a> presentation in which I will discuss various
(well, two) options for deploying Atomic into an OpenStack
environment, focusing on my <a href=https://github.com/projectatomic/heat-kubernetes/>heat-kubernetes</a> templates.</p><p>As part of that presentation, I&rsquo;ve put together a short demonstration video:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/tS5X0qi04ZU?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><p>This shows off the autoscaling behavior available with recent versions
of these templates (and also serves as a very brief introduction to
working with Kubernetes).</p></div><div><a class="read-more button inline" href=/post/2015-06-19-heatkubernetes-demo-with-autos/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-03-09-diagnosing-problems-with-an-op/>Diagnosing problems with an OpenStack deployment</a></h1><div class=post-meta><time class=post-date>2015-03-09</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
</span><img src=/post/2015-03-09-diagnosing-problems-with-an-op/lucy.jpg class=post-cover alt="Diagnosing problems with an OpenStack deployment" title="Cover Image"><div class=post-content><p>I recently had the chance to help a colleague debug some problems in
his OpenStack installation. The environment was unique because it was
booting virtualized <a href=https://fedoraproject.org/wiki/Architectures/AArch64>aarch64</a> instances, which at the time did not
have any PCI bus support&mldr;which in turn precluded things like graphic
consoles (i.e., VNC or SPICE consoles) for the Nova instances.</p><p>This post began life as an email summarizing the various configuration
changes we made on the systems to get things up and running. After
writing it, I decided it presented an interesting summary of some
common (and maybe not-so-common) issues, so I am posting it here in
the hopes that other folks will find it interesting.</p></div><div><a class="read-more button inline" href=/post/2015-03-09-diagnosing-problems-with-an-op/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-02-11-installing-novadocker-with-dev/>Installing nova-docker with devstack</a></h1><div class=post-meta><time class=post-date>2015-02-11</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/devstack/>devstack</a>&nbsp;</span><div class=post-content><p>This is a long-form response to <a href=https://ask.openstack.org/en/question/60679/installing-docker-on-openstack-with-ubuntu/>this question</a>, and describes
how to get the <a href=http://github.com/stackforge/nova-docker/>nova-docker</a> driver up running with <a href=http://devstack.org/>devstack</a>
under Ubuntu 14.04 (Trusty). I wrote a <a href=https://blog.oddbit.com/post/2015-02-06-installing-nova-docker-on-fedo/>similar post</a> for Fedora
21, although that one was using the <a href=http://openstack.redhat.com/>RDO</a> Juno packages, while this
one is using <a href=http://devstack.org/>devstack</a> and the upstream sources.</p><h2 id=getting-started>Getting started</h2><p>We&rsquo;ll be using the <a href=https://cloud-images.ubuntu.com/trusty/current/>Ubuntu 14.04 cloud image</a> (because my test
environment runs on <a href=http://www.openstack.org/>OpenStack</a>).</p><p>First, let&rsquo;s install a few prerequisites:</p><pre><code>$ sudo apt-get update
$ sudo apt-get -y install git git-review python-pip python-dev
</code></pre><p>And generally make sure things are up-to-date:</p></div><div><a class="read-more button inline" href=/post/2015-02-11-installing-novadocker-with-dev/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-02-06-installing-nova-docker-on-fedo/>Installing nova-docker on Fedora 21/RDO Juno</a></h1><div class=post-meta><time class=post-date>2015-02-06</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/docker/>docker</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/nova/>nova</a>&nbsp;</span><div class=post-content><p>This post comes about indirectly by a request on IRC in <code>#rdo</code> for help getting <a href=https://github.com/stackforge/nova-docker>nova-docker</a> installed on Fedora 21. I ran through the process from start to finish and decided to write everything down for posterity.</p><h2 id=getting-started>Getting started</h2><p>I started with the <a href=https://getfedora.org/en/cloud/download/>Fedora 21 Cloud Image</a>, because I&rsquo;m
installing onto OpenStack and the cloud images include
some features that are useful in this environment.</p><p>We&rsquo;ll be using OpenStack packages from the <a href=https://repos.fedorapeople.org/repos/openstack/openstack-juno/>RDO Juno</a> repository.
Because there is often some skew between the RDO packages and the
current Fedora selinux policy, we&rsquo;re going to start by putting SELinux
into permissive mode (sorry, Dan):</p></div><div><a class="read-more button inline" href=/post/2015-02-06-installing-nova-docker-on-fedo/>[read more]</a></div></article><article class="post on-list"><h1 class=post-title><a href=https://blog.oddbit.com/post/2015-02-05-filtering-libvirt-xml-in-nova/>Filtering libvirt XML in Nova</a></h1><div class=post-meta><time class=post-date>2015-02-05</time></div><span class=post-tags>#<a href=https://blog.oddbit.com/tags/openstack/>openstack</a>&nbsp;
#<a href=https://blog.oddbit.com/tags/nova/>nova</a>&nbsp;</span><div class=post-content><p>I saw a request from a customer float by the other day regarding the
ability to filter the XML used to create Nova instances in libvirt.
The customer effectively wanted to blacklist a variety of devices (and
device types). The consensus seems to be &ldquo;you can&rsquo;t do this right now
and upstream is unlikely to accept patches that implement this
behavior&rdquo;, but it sounded like an interesting problem, so&mldr;</p><ul><li><a href=https://github.com/larsks/nova/tree/feature/xmlfilter>https://github.com/larsks/nova/tree/feature/xmlfilter</a></li></ul><p>This is a fork of Nova (Juno) that includes support for an extensible
filtering mechanism that is applied to the generated XML before it
gets passed to libvirt.</p></div><div><a class="read-more button inline" href=/post/2015-02-05-filtering-libvirt-xml-in-nova/>[read more]</a></div></article><div class=pagination><div class=pagination__buttons><a href=/tags/openstack/ class="button inline prev">&lt; [<span class=button__text>Newer posts</span>]
</a>::
<a href=/tags/openstack/page/3/ class="button inline next">[<span class=button__text>Older posts</span>] ></a></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Lars Kellogg-Stedman</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></div></body></html>